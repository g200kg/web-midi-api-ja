
<!DOCTYPE html>
<html lang="en" typeof="bibo:Document w3p:WD" prefix="bibo: http://purl.org/ontology/bibo/ w3p: http://www.w3.org/2001/02pd/rec54#">
<head><meta property="dc:language" content="en" lang="">
    <title>Web MIDI API (日本語訳)</title>
    <meta charset="utf-8">


    <!--
      === NOTA BENE ===
      For the three scripts below, if your spec resides on dev.w3 you can check them
      out in the same tree and use relative links so that they'll work offline,
     -->


  <style>/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* --- INLINES --- */
body {
  line-height:120%;
}
.annotate {
  color:red;
}
em.rfc2119 {
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

cite .bibref {
    font-style: normal;
}

code {
    color:  #C83500;
}

/* --- TOC --- */
.toc a, .tof a {
    text-decoration:    none;
}

a .secno, a .figno {
    color:  #000;
}

ul.tof, ol.tof {
    list-style: none outside none;
}

.caption {
    margin-top: 0.5em;
    font-style:   italic;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}

@media print {
    .removeOnSave {
        display: none;
    }
}
</style><style>/* --- ISSUES/NOTES --- */
div.issue-title, div.note-title , div.warning-title {
    padding-right:  1em;
    min-width: 7.5em;
    color: #b9ab2d;
}
div.issue-title { color: #e05252; }
div.note-title { color: #2b2; }
div.warning-title { color: #f22; }
div.issue-title span, div.note-title span, div.warning-title span {
    text-transform: uppercase;
}
div.note, div.issue, div.warning {
    margin-top: 1em;
    margin-bottom: 1em;
}
.note > p:first-child, .issue > p:first-child, .warning > p:first-child { margin-top: 0 }
.issue, .note, .warning {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
}
div.issue, div.note , div.warning {
    padding: 1em 1.2em 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
span.note, span.issue, span.warning { padding: .1em .5em .15em; }

.issue {
    border-color: #e05252;
    background: #fbe9e9;
}
.note {
    border-color: #52e052;
    background: #e9fbe9;
}

.warning {
    border-color: #f11;
    border-right-width: .2em;
    border-top-width: .2em;
    border-bottom-width: .2em;
    border-style: solid;
    background: #fbe9e9;
}

.warning-title:before{
    content: "⚠"; /*U+26A0 WARNING SIGN*/
    font-size: 3em;
    float: left;
    height: 100%;
    padding-right: .3em;
    vertical-align: top;
    margin-top: -0.5em;
}
</style><style>/* --- WEB IDL --- */
pre.idl {
    border-top: 1px solid #90b8de;
    border-bottom: 1px solid #90b8de;
    padding:    1em;
    line-height:    120%;
}

pre.idl::before {
    content:    "WebIDL";
    display:    block;
    width:      150px;
    background: #90b8de;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

.idlType {
    color:  #ff4500;
    font-weight:    bold;
    text-decoration:    none;
}

/*.idlModule*/
/*.idlModuleID*/
/*.idlInterface*/
.idlInterfaceID, .idlDictionaryID, .idlCallbackID, .idlEnumID {
    font-weight:    bold;
    color:  #005a9c;
}
a.idlEnumItem {
    color:  #000;
    border-bottom:  1px dotted #ccc;
    text-decoration: none;
}

.idlSuperclass {
    font-style: italic;
    color:  #005a9c;
}

/*.idlAttribute*/
.idlAttrType, .idlFieldType, .idlMemberType {
    color:  #005a9c;
}
.idlAttrName, .idlFieldName, .idlMemberName {
    color:  #ff4500;
}
.idlAttrName a, .idlFieldName a, .idlMemberName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlMethod*/
.idlMethType, .idlCallbackType {
    color:  #005a9c;
}
.idlMethName {
    color:  #ff4500;
}
.idlMethName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlCtor*/
.idlCtorName {
    color:  #ff4500;
}
.idlCtorName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlParam*/
.idlParamType {
    color:  #005a9c;
}
.idlParamName, .idlDefaultValue {
    font-style: italic;
}

.extAttr {
    color:  #666;
}

/*.idlSectionComment*/
.idlSectionComment {
    color: gray;
}

/*.idlMaplike*/
.idlMaplikeKeyType, .idlMaplikeValueType {
    color:  #005a9c;
}

/*.idlConst*/
.idlConstType {
    color:  #005a9c;
}
.idlConstName {
    color:  #ff4500;
}
.idlConstName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlException*/
.idlExceptionID {
    font-weight:    bold;
    color:  #c00;
}

.idlTypedefID, .idlTypedefType {
    color:  #005a9c;
}

.idlRaises, .idlRaises a.idlType, .idlRaises a.idlType code, .excName a, .excName a code {
    color:  #c00;
    font-weight:    normal;
}

.excName a {
    font-family:    monospace;
}

.idlRaises a.idlType, .excName a.idlType {
    border-bottom:  1px dotted #c00;
}

.excGetSetTrue, .excGetSetFalse, .prmNullTrue, .prmNullFalse, .prmOptTrue, .prmOptFalse {
    width:  45px;
    text-align: center;
}
.excGetSetTrue, .prmNullTrue, .prmOptTrue { color:  #0c0; }
.excGetSetFalse, .prmNullFalse, .prmOptFalse { color:  #c00; }

.idlImplements a {
    font-weight:    bold;
}

dl.attributes, dl.methods, dl.constants, dl.constructors, dl.fields, dl.dictionary-members {
    margin-left:    2em;
}

.attributes dt, .methods dt, .constants dt, .constructors dt, .fields dt, .dictionary-members dt {
    font-weight:    normal;
}

.attributes dt code, .methods dt code, .constants dt code, .constructors dt code, .fields dt code, .dictionary-members dt code {
    font-weight:    bold;
    color:  #000;
    font-family:    monospace;
}

.attributes dt code, .fields dt code, .dictionary-members dt code {
    background:  #ffffd2;
}

.attributes dt .idlAttrType code, .fields dt .idlFieldType code, .dictionary-members dt .idlMemberType code {
    color:  #005a9c;
    background:  transparent;
    font-family:    inherit;
    font-weight:    normal;
    font-style: italic;
}

.methods dt code {
    background:  #d9e6f8;
}

.constants dt code {
    background:  #ddffd2;
}

.constructors dt code {
    background:  #cfc;
}

.attributes dd, .methods dd, .constants dd, .constructors dd, .fields dd, .dictionary-members dd {
    margin-bottom:  1em;
}

table.parameters, table.exceptions {
    border-spacing: 0;
    border-collapse:    collapse;
    margin: 0.5em 0;
    width:  100%;
}
table.parameters { border-bottom:  1px solid #90b8de; }
table.exceptions { border-bottom:  1px solid #deb890; }

.parameters th, .exceptions th {
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
    font-family:    initial;
    font-weight:    normal;
    text-shadow:    #666 1px 1px 0;
}
.parameters th { background: #90b8de; }
.exceptions th { background: #deb890; }

.parameters td, .exceptions td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
    vertical-align: top;
}

.parameters tr:first-child td, .exceptions tr:first-child td {
    border-top: none;
}

.parameters td.prmName, .exceptions td.excName, .exceptions td.excCodeName {
    width:  100px;
}

.parameters td.prmType {
    width:  120px;
}

table.exceptions table {
    border-spacing: 0;
    border-collapse:    collapse;
    width:  100%;
}
</style><link href="https://www.w3.org/StyleSheets/TR/W3C-WD" rel="stylesheet"><!--[if lt IE 9]><script src='https://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]-->

<script type="text/javascript">
function OpenOriginal(x) {
  var url="http://www.w3.org/TR/webmidi/#"+x;
  window.open(url, "wmapioriginal", "width=1000, height=600, toolbar=1,location=1,resizable=1,scrollbars=1,status=1");
}
</script>

</head>
  <body id="respecDocument" role="document" class="h-entry"><div id="respecHeader" role="contentinfo" class="head">

    <h1>Web MIDI API (日本語訳) 2015年3月17日版ワーキングドラフト</h1>
    <div style="background-color: #ddf; border: 1px solid #668; padding:10px 20px">
      <p>この文書は、W3Cの文書 "「Web MIDI API」 W3C Working Draft 17 March 2015" の日本語訳です。
      </p>
      <p>Web MIDI APIの正式な文書は英語版のみであり、日本語訳には翻訳に起因する誤りが含まれている場合があります。<br/>
        正式な文書は<a href="http://www.w3.org/TR/webmidi/">http://www.w3.org/TR/webmidi/</a>にあります。<br/>
      </p>
      <p>翻訳元の文書はまだワーキングドラフト(Working Draft)です。現状ではまだ説明が不足している部分があったり、今後も頻繁に更新される可能性がある事に注意してください。
      </p>
      <p><b class="annotate">注:</b> 現在ネイティブのWeb MIDI APIの実装が進んでいるのはChromeだけであり、それ以外の環境で動作させるには Polyfill(<a href="http://cwilso.github.io/WebMIDIAPIShim/">WebMIDIAPIShim</a>)と<a href="http://jazz-soft.net/doc/Jazz-Plugin/">JazzPlugin</a>が必要になります。
      </p>
      <p>
        日本語訳GitHub : <b><a href="https://github.com/g200kg/web-midi-api-ja">https://github.com/g200kg/web-midi-api-ja</a></b><br/>
        日本語訳公開URL : <b><a href="http://g200kg.github.io/web-midi-api-ja/">http://g200kg.github.io/web-midi-api-ja/</a></b>
      </p>
      <img src="images/midiappy_small.png" alt="" style="float:left;margin:0px 10px"/>
      <p>Tatsuya Shinyagaito @ g200kg<br/>
        誤りその他があればGitHubページ、下のサイト経由などで連絡をお願いいたします。<br/>
        <b><a href="http://www.g200kg.com/">http://www.g200kg.com/</a></b><br/>
      </p>
      <p>2015年3月18日</p>
    </div>
    <hr/>

  <p>


            <a href="http://www.w3.org/"><img src="https://www.w3.org/Icons/w3c_home" alt="W3C" height="48" width="72"></a>


  </p>
  <h1 class="title p-name" id="title" property="dcterms:title">Web MIDI API</h1>

  <h2 id="w3c-working-draft-17-march-2015"><abbr title="World Wide Web Consortium">W3C</abbr> Working Draft <time property="dcterms:issued" class="dt-published" datetime="2015-03-17">17 March 2015</time></h2>
  <dl>

      <dt>このバージョン:</dt>
      <dd><a class="u-url" href="http://www.w3.org/TR/2015/WD-webmidi-20150317/">http://www.w3.org/TR/2015/WD-webmidi-20150317/</a></dd>
      <dt>最新の公開バージョン:</dt>
      <dd><a href="http://www.w3.org/TR/webmidi/">http://www.w3.org/TR/webmidi/</a></dd>


      <dt>最新のエディターズドラフト:</dt>
      <dd><a href="http://webaudio.github.io/web-midi-api/">http://webaudio.github.io/web-midi-api/</a></dd>






      <dt>前のバージョン:</dt>
      <dd><a rel="dcterms:replaces" href="http://www.w3.org/TR/2013/WD-webmidi-20131126/">http://www.w3.org/TR/2013/WD-webmidi-20131126/</a></dd>


    <dt>編集者:</dt>
    <dd class="p-author h-card vcard" property="bibo:editor" resource="_:editor0" data-editor-id="3742"><span property="rdf:first" typeof="foaf:Person"><meta property="foaf:name" content="Chris Wilson"><a class="u-url url p-name fn" property="foaf:homepage" href="mailto:cwilso@google.com">Chris Wilson</a>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://google.com">Google</a></span>
<span property="rdf:rest" resource="_:editor1"></span>
</dd>
<dd class="p-author h-card vcard" resource="_:editor1" data-editor-id="45545"><span property="rdf:first" typeof="foaf:Person"><meta property="foaf:name" content="Jussi Kalliokoski"><a class="u-url url p-name fn" property="foaf:homepage" href="http://juss.in">Jussi Kalliokoski</a></span>
<span property="rdf:rest" resource="rdf:nil"></span>
</dd>





          <dt>バージョニングリポジトリ:</dt>



                <dd>
                  <a href="https://github.com/WebAudio/web-midi-api/">https://github.com/WebAudio/web-midi-api/</a>
                </dd>






          <dt>イシュートラッカー:</dt>



                <dd>
                  <a href="https://github.com/WebAudio/web-midi-api/issues?state=open">https://github.com/WebAudio/web-midi-api/issues?state=open</a>
                </dd>






          <dt>フィードバック email リスト:</dt>



                <dd>
                  <a href="mailto:public-audio@w3.org">mailto:public-audio@w3.org</a>
                </dd>






  </dl>





      <p class="copyright">
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©
        2015

        <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
        (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
        <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
        <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>).

        <abbr title="World Wide Web Consortium">W3C</abbr> <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and

          <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a>

        rules apply.
      </p>


  <hr>
</div>
    <section property="dc:abstract" class="introductory" id="abstract"><h2 resource="#h-abstract" id="h-abstract"><span property="xhv:role" resource="xhv:heading">概要 <button onclick="OpenOriginal('abstract')">原文</button></span></h2>
      <p>
        シンセサイザー、キーボード等のコントローラー、ドラムマシンなど、
        ユーザーエージェントはそのホストコンピューターやデバイスに接続された音楽機器を持っている場合があります。
        広く採用されている、Musical Instrument Digital Interface (MIDI) プロトコルは電子楽器、
        コントローラー、コンピューター間で相互に通信と同期を可能にするものです。
        MIDIはオーディオ信号は送信しません:
        その代わりに音符に関するイベントメッセージ、音量やビブラートやパンニングなどのパラメーターのコントローラー信号、
        キューやテンポを合わせるためのクロック、あるいはそのシステム固有の (例えばリモートに保存されているシンセサイザー固有のパッチデータなど)
        通信を行います。
        このプロトコルは照明装置や特殊効果の制御を行うショーコントロールのような、音楽以外での分野でも標準となっています。
      </p>
      <p>
        この仕様はMIDIプロトコルをサポートするAPIを定義し、Webアプリケーションがクライアントシステム上のMIDI入出力デバイスを列挙、選択し、
        MIDIメッセージを送信および受信する事を可能にします。
        ユーザーのシステム上にあるMIDIデバイスへの低レベルアクセスが可能になる事によって、音楽に関するものだけでなく、
        非音楽関係のMIDIアプリケーションも構築できるようになります。
        一方でWeb MIDI APIは、音楽やコントローラーの入力の意味を表現するものではありません;
        これはMIDI入力と出力インターフェースのメカニズムに触れる事ができ、
        MIDIメッセージをその動作の意味を認識する事なく、送信および受信するという実用的な側面のために設計されています
        (例えば、"20Hzでビブラートを掛ける"や"G#7の和音を演奏する"と言うような、
        コントローラーの値が変わった事やG#7の和音を演奏した時の一組のノートオンメッセージという以上の意味を持ちません)。
      </p>
      <p>
        ユーザーの一部では、"MIDI"は、スタンダードMIDIファイルおよびジェネラルMIDIと同義語として使われています。
        それはこのAPIの意図する所ではありません; 単純に.SMFファイルを再生する、という使用例はこの仕様の範囲ではありません
         (それは例えばHTML5の &lt;audio&gt;要素のような異なったフォーマットのものとしては考慮されるかも知れません)。

        Web MIDI APIは MIDIに対応するデバイス、例えば外部のシンセサイザーや照明システム、あるいは多くのオペレーティングシステム
        に組み込まれているソフトウェアシンセサイザーへの直接的なアクセスを可能にする事を意図しています。

        Web MIDI APIはまた明らかに、MIDIコントローラーからの入力に反応するという新種のWeb上のアプリケーションを可能にするために設計されています。
        Webアプリケーションを制御するために、(キーボード、ギター、管楽器コントローラーなどの楽器コントローラーとー同様に)
        物理的なボタンやツマミやスライダーなどを使った、外部ハードウェアコントローラーが使用される事になるでしょう。
      </p>
      <p>
        Web MIDI APIはまた、Webプラットフォームの他のAPIや要素、特にWeb Audio APIと組み合わせて使われる事を想定しています。
        また、このAPIはApple社のCoreMIDIやMicrosoft社のWindows MIDI APIなど、他のシステムのMIDI APIに精通しているユーザーに向けたものです。
      </p>
    </section><section id="sotd" class="introductory"><h2 resource="#h-sotd" id="h-sotd"><span property="xhv:role" resource="xhv:heading">この文書の位置づけ</span> <button onclick="OpenOriginal('sotd')">原文</button></h2>
        <p>
          <em>このセクションは、この文書の公開時における状況を記述したものです。 他の文書がこの文書に取って代わるかもしれません。 現在の<abbr title="World Wide Web Consortium">W3C</abbr>の刊行物およびこの技術レポートの最新版のリストは、
            http://www.w3.org/TR/にある、<a href="http://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a>から見つけることができます。</em>
        </p>
        <p>
          この文書は<a href="http://www.w3.org/2011/audio/">Audio Working Group</a>によって、ワーキングドラフトとして公開されました。
          この文書は<abbr title="World Wide Web Consortium">W3C</abbr> Recommendationとなることを意図しています。
           この文書にコメントしたい場合は以下で受け付けます。
            <a href="mailto:public-audio@w3.org">public-audio@w3.org</a>
            (<a href="mailto:public-audio-request@w3.org?subject=subscribe">subscribe</a>,
            <a href="http://lists.w3.org/Archives/Public/public-audio/">archives</a>).
            どんなコメントでも歓迎します。
        </p>
          <p>
            ワーキングドラフトとしての公開は<abbr title="World Wide Web Consortium">W3C</abbr>メンバーによる承認を意味するものではありません。 これは草案文書であり、いつでも他の文書によって改訂、置き換えあるいは廃止される可能性があります。
             この文書を作業中のもの以外として引用する事は不適切です。
          </p>
        <p>
          この文書は<a id="sotd_patent" property="w3p:patentRules" href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>の基に運用されるグループによって作成されました。
          <abbr title="World Wide Web Consortium">W3C</abbr>はグループの成果物から作成された<a href="http://www.w3.org/2004/01/pp-impl/46884/status" rel="disclosure">特許開示リスト</a>を維持しています。 また、このページは特許開示の手順についても提示しています。
          特許について実際の知識を持ち、
          それが<a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">基本的な請求事項</a>を含むと考える者は、
          <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure"><abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy 6節</a>に従って情報を開示しなくてはなりません。
        </p>
          <p>
            この文書は<a id="w3c_process_revision" href="http://www.w3.org/2014/Process-20140801/">2014年8月1日 <abbr title="World Wide Web Consortium">W3C</abbr> 文書管理方法</a>によって管理されます。
          </p>

</section><section id="toc"><h2 resource="#h-toc" id="h-toc" class="introductory"><span property="xhv:role" resource="xhv:heading">目次</span> <button onclick="OpenOriginal('toc')">原文</button></h2><ul id="respecContents" role="directory" class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><span class="secno">1. </span>序文</a></li><li class="tocline"><a class="tocxref" href="#conformance"><span class="secno">2. </span>準拠</a></li><li class="tocline"><a class="tocxref" href="#terminology"><span class="secno">3. </span>用語</a></li><li class="tocline"><a class="tocxref" href="#obtaining-access-to-midi-devices"><span class="secno">4. </span>MIDIデバイスへのアクセスの取得</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#requestmidiaccess"><span class="secno">4.1 </span>requestMIDIAccess()</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#methods"><span class="secno">4.1.1 </span>メソッド</a></li></ul></li><li class="tocline"><a class="tocxref" href="#midioptions-dictionary"><span class="secno">4.2 </span><span class="formerLink"><code>MIDIOptions</code></span> ディクショナリ</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#dictionary-midioptions-members"><span class="secno">4.2.1 </span>ディクショナリ <span class="formerLink"><code>MIDIOptions</code></span> メンバー</a></li></ul></li><li class="tocline"><a class="tocxref" href="#midiinputmap-interface"><span class="secno">4.3 </span><span class="formerLink"><code>MIDIInputMap</code></span> インターフェース</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#maplike"><span class="secno">4.3.1 </span>マップライク</a></li></ul></li><li class="tocline"><a class="tocxref" href="#midioutputmap-interface"><span class="secno">4.4 </span><span class="formerLink"><code>MIDIOutputMap</code></span> インターフェース</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#maplike-1"><span class="secno">4.4.1 </span>マップライク</a></li></ul></li><li class="tocline"><a class="tocxref" href="#midisuccesscallback"><span class="secno">4.5 </span><span class="formerLink"><code>MIDISuccessCallback</code></span></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#callback-midisuccesscallback-parameters"><span class="secno">4.5.1 </span>コールバック <span class="formerLink"><code>MIDISuccessCallback</code></span> パラメーター</a></li></ul></li></ul></li><li class="tocline"><a class="tocxref" href="#midiaccess-interface"><span class="secno">5. </span><span class="formerLink"><code>MIDIAccess</code></span> インターフェース</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes"><span class="secno">5.1 </span>属性</a></li></ul></li><li class="tocline"><a class="tocxref" href="#midiport-interface"><span class="secno">6. </span><span class="formerLink"><code>MIDIPort</code></span> インターフェース</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-1"><span class="secno">6.1 </span>属性</a></li><li class="tocline"><a class="tocxref" href="#methods-1"><span class="secno">6.2 </span>メソッド</a></li><li class="tocline"><a class="tocxref" href="#midiinput-interface"><span class="secno">6.3 </span><span class="formerLink"><code>MIDIInput</code></span> インターフェース</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-2"><span class="secno">6.3.1 </span>属性</a></li></ul></li><li class="tocline"><a class="tocxref" href="#midioutput-interface"><span class="secno">6.4 </span><span class="formerLink"><code>MIDIOutput</code></span> インターフェース</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#methods-2"><span class="secno">6.4.1 </span>メソッド</a></li></ul></li></ul></li><li class="tocline"><a class="tocxref" href="#midimessageevent-interface"><span class="secno">7. </span><span class="formerLink"><code>MIDIMessageEvent</code></span> インターフェース</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-3"><span class="secno">7.1 </span>属性</a></li><li class="tocline"><a class="tocxref" href="#midimessageeventinit-interface"><span class="secno">7.2 </span><span class="formerLink"><code>MIDIMessageEventInit</code></span> インターフェース</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#dictionary-midimessageeventinit-members"><span class="secno">7.2.1 </span>ディクショナリ <span class="formerLink"><code>MIDIMessageEventInit</code></span> メンバー</a></li></ul></li></ul></li><li class="tocline"><a class="tocxref" href="#midiconnectionevent-interface"><span class="secno">8. </span><span class="formerLink"><code>MIDIConnectionEvent</code></span> インターフェース</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-4"><span class="secno">8.1 </span>属性</a></li><li class="tocline"><a class="tocxref" href="#midiconnectioneventinit-interface"><span class="secno">8.2 </span><span class="formerLink"><code>MIDIConnectionEventInit</code></span> インターフェース</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#dictionary-midiconnectioneventinit-members"><span class="secno">8.2.1 </span>ディクショナリ <span class="formerLink"><code>MIDIConnectionEventInit</code></span> メンバー</a></li></ul></li></ul></li><li class="tocline"><a class="tocxref" href="#examples-of-web-midi-api-usage-in-javascript"><span class="secno">9. </span>JavaScriptでのWeb MIDI API 使用例</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#getting-access-to-the-midi-system"><span class="secno">9.1 </span>MIDIシステムへのアクセスの取得</a></li><li class="tocline"><a class="tocxref" href="#requesting-access-to-the-midi-system-with-system-exclusive-support"><span class="secno">9.2 </span>システムエクスクルーシブサポートを伴ったMIDIシステムへのアクセスの取得</a></li><li class="tocline"><a class="tocxref" href="#listing-inputs-and-outputs"><span class="secno">9.3 </span>入力および出力のリスティング</a></li><li class="tocline"><a class="tocxref" href="#handling-midi-input"><span class="secno">9.4 </span>MIDI入力の扱い方</a></li><li class="tocline"><a class="tocxref" href="#sending-midi-messages-to-an-output-device"><span class="secno">9.5 </span>出力デバイスへのMIDIメッセージの送信</a></li><li class="tocline"><a class="tocxref" href="#a-simple-loopback"><span class="secno">9.6 </span>単純なループバック</a></li><li class="tocline"><a class="tocxref" href="#a-simple-monophonic-sine-wave-midi-synthesizer"><span class="secno">9.7 </span>単純なモノフォニックサイン波MIDIシンセサイザー</a></li></ul></li><li class="tocline"><a class="tocxref" href="#security-and-privacy-considerations-of-midi"><span class="secno">10. </span>MIDIのセキュリティとプライバシーに関する考察</a></li><li class="tocline"><a class="tocxref" href="#references"><span class="secno">A. </span>リファレンス</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><span class="secno">A.1 </span>基準リファレンス</a></li></ul></li></ul></section>
    <section property="bibo:hasPart" resource="#introduction" typeof="bibo:Chapter" id="introduction" class="informative">
      <!--OddPage--><h2 resource="#h-introduction" id="h-introduction"><span property="xhv:role" resource="xhv:heading"><span class="secno">1. </span>序文</span> <button onclick="OpenOriginal('introduction')">原文</button></h2><p><em>このセクションは非基準情報です。</em></p>
      <p>
        Web MIDI API仕様はWeb開発者がMIDIデバイス、
        例えば機器が接続されるハードウェアMIDIポートやUSB-MIDI仕様をサポートしたUSB機器などのインターフェース、
        に対して列挙、操作、アクセスを行う手段を定義しています。
        MIDIに対するWeb APIを持つ事で、Webアプリケーションは既存のソフトウェアやハードウェアのシンセサイザー、ハードウェアの音楽コントローラー、
        照明システムやその他のMIDIで制御される機器/機械を使う事ができるようになります。
        このAPIは広い範囲の使用例を念頭に定義されています。
      </p>
      <p>
        このAPIが取るアプローチはApple社のCoreMIDIやMicrosoft社のWindows MIDI APIに似ています;
        つまり、APIは開発者がその上に有用なMIDIソフトウェアを構築できるように、
        MIDIの低レベルのソフトウェアプロトコルを表すように設計されていると言う事です。
         APIは開発者が入出力インターフェースを列挙し、MIDIメッセージを送受信する事を可能にしますが、
         (前述の他のAPIと同様に)現存するデバイスを確実にサポートするために必要な範囲を超えて、
         MIDIメッセージの意味を定義したり解釈する事は行いません。
      </p>
      <p>
        Web MIDI APIはシーケンサーなどの高レベルの概念を直接実装する事は意図していません;
        例えば、スタンダードMIDIファイルは直接サポートされませんが、Web MIDI APIの上にスタンダードMIDIファイルプレーヤーを構築する事は可能です。
         また、ジェネラルMIDIが行っているようにパッチやコントローラーのアサインを意味的に定める事も意図しません;
         それらの解釈はWeb MIDI APIの範囲外です(繰り返しになりますが、Web MIDI APIを通してジェネラルMIDIを簡単に利用する事はできます)。
      </p>
    </section>
    <section property="bibo:hasPart" resource="#conformance" typeof="bibo:Chapter" id="conformance"><!--OddPage--><h2 resource="#h-conformance" id="h-conformance"><span property="xhv:role" resource="xhv:heading"><span class="secno">2. </span>準拠</span> <button onclick="OpenOriginal('conformance')">原文</button></h2>
      <p>
        この仕様中、非基準情報と書かれているセクションと同様に、全てのオーサリングガイドライン、図、例、注、は非基準情報です。
        仕様内のその他の全ては基準情報です。
      </p>
      <p id="respecRFC2119">
        この仕様内のキーワード、<em class="rfc2119" title="MUST">MUST</em>、 <em class="rfc2119" title="SHOULD">SHOULD</em>は[<cite><a href="#bib-RFC2119" class="bibref">RFC2119</a></cite>]で規定されているように解釈されます。
      </p>
      <p>
        この仕様で定義される適合基準は、このインターフェースを実装するユーザーエージェント単体に適用されます。
      </p>
      <p>
        この仕様で定められているAPIの実装にECMAScriptを使用する場合、
        この仕様で使用されているWeb IDL仕様[<cite><a href="#bib-WEBIDL" class="bibref">WEBIDL</a></cite>]
        で定義されるECMAScriptバインディングの作法で実装しなくてはなりません
        (<em title="MUST" class="rfc2119">MUST</em>)。
      </p>
    </section>

    <section property="bibo:hasPart" resource="#terminology" typeof="bibo:Chapter" id="terminology">
      <!--OddPage--><h2 resource="#h-terminology" id="h-terminology"><span property="xhv:role" resource="xhv:heading"><span class="secno">3. </span>用語</span> <button onclick="OpenOriginal('terminology')">原文</button></h2>
      <p>
        <dfn id="dfn-queue-a-task"><a href="http://dev.w3.org/html5/spec/webappapis.html#queue-a-task">
        タスクをキューに登録</a></dfn>および、 <dfn id="dfn-fires-a-simple-event"><a href="http://dev.w3.org/html5/spec/webappapis.html#fire-a-simple-event">
        単純なイベントの発行</a></dfn>の概念は、[<cite><a href="#bib-HTML5" class="bibref">HTML5</a></cite>]で定義されています。
      </p>
      <p>
        <dfn id="dfn-event-handlers"><a href="http://dev.w3.org/html5/spec/webappapis.html#event-handlers">
        イベントハンドラー</a></dfn>、
        <dfn id="dfn-event-handler-event-types"><a href="http://dev.w3.org/html5/spec/webappapis.html#event-handler-event-type">
      イベントハンドラーイベントタイプ</a></dfn> および対応する<a href="http://www.w3.org/html/wg/drafts/html/master/single-page.html#eventhandler">
        <code>EventHandler</code></a> インターフェースは [<cite><a href="#bib-HTML5" class="bibref">HTML5</a></cite>]
        で定義されています。</p>
      <p>
        <dfn id="dfn-uint8array"><a href="http://www.khronos.org/registry/typedarray/specs/latest/#TYPEDARRAYS">Uint8Array</a></dfn> インターフェース
        は [<cite><a href="#bib-TYPED-ARRAYS" class="bibref">TYPED-ARRAYS</a></cite>]で定義されています。
      </p>
      <p>
        <dfn id="OctetDfn"><a href="http://www.w3.org/TR/WebIDL/#idl-octet">octet</a></dfn> は [<cite><a href="#bib-WEBIDL" class="bibref">WEBIDL</a></cite>]で定義されています。
      </p>
      <p>
        <dfn id="WebAudio">Web Audio API</dfn> およびそれに関連するインターフェース、概念は[<cite><a href="#bib-webaudio" class="bibref">webaudio</a></cite>]で定義されています。
      </p>
      <p>
        <a href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html/#interface-event"><dfn id="dfn-event" title="Event">Event</dfn></a> インターフェースは
        [<cite><a href="#bib-DOM4" class="bibref">DOM4</a></cite>]で定義されています。
      </p>
      <p><a href="http://www.w3.org/TR/DOM-Level-3-Core/core.html#ERROR-Interfaces-DOMError"><dfn id="dfn-domerror" title="DOMError">DOMError</dfn></a> インターフェースは [<cite><a href="#bib-DOM-LEVEL-3-CORE" class="bibref">DOM-LEVEL-3-CORE</a></cite>]で定義されています。
      </p><p>
        <dfn id="DomHighResTimeStampDfn"><a href="http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/HighResolutionTime/Overview.html#sec-DOMHighResTimeStamp">DOMHighResTimeStamp</a></dfn> インターフェースは [<cite><a href="#bib-HIGHRES-TIME" class="bibref">HIGHRES-TIME</a></cite>]
        で定義されています。
      </p>
      <p>
        <dfn id="dfn-midi">MIDI</dfn>, <dfn id="dfn-midi-device">MIDI デバイス</dfn>、
        <dfn id="dfn-midi-input-port">MIDI 入力ポート</dfn>, <dfn id="dfn-midi-output-port">MIDI 出力ポート</dfn>、
        <dfn id="dfn-midi-interface">MIDI インターフェース</dfn>, <dfn id="dfn-midi-message">MIDI メッセージ</dfn>、
        <dfn id="dfn-midi-system-real-time-message">MIDI システムリアルタイムメッセージ</dfn>、
        <dfn id="dfn-system-exclusive">システムエクスクルーシブ</dfn> は [<cite><a href="#bib-MIDI" class="bibref">MIDI</a></cite>]
        で定義されています。
      </p><p>
        <dfn id="dfn-promise"><a href="http://dom.spec.whatwg.org/#promises">Promise</a></dfn> インターフェースは現在 <a href="http://dom.spec.whatwg.org/">the WHATWG DOM specification</a>で定義されています。
<!-- FIXME: This list is not exhaustive. -->
    </p></section>

    <section property="bibo:hasPart" resource="#obtaining-access-to-midi-devices" typeof="bibo:Chapter" id="obtaining-access-to-midi-devices">
      <!--OddPage--><h2 resource="#h-obtaining-access-to-midi-devices" id="h-obtaining-access-to-midi-devices"><span property="xhv:role" resource="xhv:heading"><span class="secno">4. </span>MIDIデバイスへのアクセスの取得</span> <button onclick="OpenOriginal('obtaining-access-to-midi-devices')">原文</button></h2>

      <section property="bibo:hasPart" resource="#requestmidiaccess" typeof="bibo:Chapter" id="requestmidiaccess">
          <h3 resource="#requestMIDIAccess" id="requestMIDIAccess"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1 </span>requestMIDIAccess()</span> <button onclick="OpenOriginal('requestmidiaccess')">原文</button></h3>

          <pre class="idl"><span class="idlInterface" id="idl-def-Navigator">partial interface <span class="idlInterfaceID">Navigator</span> {
<span class="idlMethod">    <span class="idlMethType">Promise&lt;<a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a>&gt;</span> <span class="idlMethName"><a href="#widl-Navigator-requestMIDIAccess-Promise-MIDIAccess--MIDIOptions-options">requestMIDIAccess</a></span> (<span class="idlParam">optional <span class="idlParamType"><a class="idlType" href="#idl-def-MIDIOptions"><code>MIDIOptions</code></a></span> <span class="idlParamName">options</span></span>);</span>
};</span></pre><section property="bibo:hasPart" resource="#methods" typeof="bibo:Chapter" id="methods"><h4 resource="#h-methods" id="h-methods"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1.1 </span>メソッド</span> <button onclick="OpenOriginal('methods')">原文</button></h4><dl class="methods"><dt id="widl-Navigator-requestMIDIAccess-Promise-MIDIAccess--MIDIOptions-options"><code>requestMIDIAccess</code></dt><dd>
              <p>
                呼び出されると、ユーザーシステム上のMIDIデバイスへのアクセス要求を表すPromiseオブジェクトを返します。
              </p>

              <p>
                MIDIアクセスの要求、特にシステムエクスクルーシブへのアクセスは、ユーザーに対してプロンプトを出し、
                MIDIデバイスにアクセスする旨の許可を得なくてはなりません(<em title="SHOULD" class="rfc2119">SHOULD</em>)。
                シナリオによっては、この許可は暗黙的あるいは明示的に既に得られている事もあり、
                この場合にはこのプロンプトは表示されないかも知れません。
                もしユーザーが承諾するか、他の手段で許可されている場合、Promiseの<var>resolveCallback</var>が<code><a class="idlType" href="#idl-def-MIDISuccessCallback"><code>MIDISuccessCallback</code></a></code>として呼び出されます (つまり、<code><a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a></code>オブジェクトと<code><a class="idlType" href="#idl-def-MIDIOptions"><code>MIDIOptions</code></a></code>オブジェクトが引数となります)。
                必須ではありませんが、下層のシステムはユーザーが特定のMIDIインターフェースをこのAPIを通じて選択できるように、
                (個別の基準で選択して)選ぶ事もあります。

                また、システムエクスクルーシブはプライバシー情報をより多く含んでいるため、そのサポートを要求されたかどうかに応じて、
                システムはプロンプトメッセージを出す(あるいは出さない)を選択するかも知れません。
              </p>
              <p>
                ユーザーが拒否したり、あるいは別の理由で呼び出しが許可されていない場合、(もし設定されていれば)Promiseの
                <var>rejectCallback</var>が<code>DOMException</code>パラメーターと共に呼び出されます。
              </p>
              <p>
                <dfn id="dom-navigator-requestmidiaccess">
                <code>requestMIDIAccess</code></dfn>メソッドが呼ばれた時、
                ユーザーエージェントは以下の<dfn id="dfn-algorithm-to-request-midi-access">MIDIアクセスリクエストアルゴリズム</dfn>
                を実行しなくてはなりません
                (<em title="MUST" class="rfc2119">MUST</em>)。：
              </p>
              <ol>

                <li><p>
                  新しいPromiseオブジェクト、<var>promise</var>を作成し、<var>resolver</var>をそれに結びついたリゾルバーとします。
                </p></li>
                <li><p>
                  <var>promise</var>を返し、以下のステップを非同期に実行します。
                </p></li>
                <li><p>
                  前もって行われているユーザー設定、セキュリティ上の理由、プラットフォームの制限などによって必要ならば、
                  下の<em>失敗</em>ステップにジャンプします。
                </p></li>
                <li><p>
                  前もって行われているユーザー設定などによって必要ならば、下の<em>成功ステップ</em>にジャンプします。
                </p></li>
                <li><p>
                  ユーザーエージェント固有の方法でユーザーにプロンプトを出し、 MIDIデバイスの制御を表す<code><a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a></code>オブジェクト、
                  即ちスクリプトの起点を渡す事に対する許可を得ます。
                  このプロンプトにはシステムエクスクルーシブのサポートを要求されているかどうかの条件が示され、
                  ユーザーはアクセスを有効にするか無効にするかを選択できます。
                  </p>
                  <p>
                    もし拒否された場合、下の<em>失敗</em>ステップにジャンプします。
                    ユーザーが応答しない場合、このアルゴリズムはこのステップに留まったまま進みません。
                    許可された場合、次のステップに進みます。
                  </p>
                </li>

                <li><p><em><b>成功</b></em>:
                  新しい<code><a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a></code>
                  オブジェクトを作成し、<var>access</var>とします。
                  (ユーザーへのプロンプトが複数回表示されるかも知れませんのであまり実際的ではありませんが、
                  requestMIDIAccess()を複数回呼び出す事は可能です。
                  そしてこの場合、毎回MIDIAccessのインスタンスは同じではありません)
                </p></li>
                <li><p>
                  <var>access</var>を引数として、<var>resolver</var>の<code>accept(value)</code>メソッドが呼び出されます。
                </p></li>
                <li><p>これらのステップを終了します。</p></li>
                <li><p><em><b>失敗</b></em>: 新しい<code>DOMException</code>例外を作成し、<var>error</var>とします。
                  この例外の.nameは
                   その型は、もしユーザーの設定かセキュリティ設定により、
                   要求されたオプションのMIDIAccessインスタンスの作成を拒否された場合は<code>"SecurityError"</code>、
                   ユーザーのナビゲーションによりページが閉じられつつある場合は<code>"AbortError"</code>、
                    下層のシステムが何らかのエラーを発生した場合は<code>"InvalidStateError"</code>、
                    それ以外の場合は<code>"NotSupportedError"</code>としなくてはなりません。
                  </p></li>
                <li><p><var>error</var>を引数として、<var>resolver</var>の<code>reject(value)</code>メソッドを呼び出します。
                </p></li>
              </ol>

            <table class="parameters"><tbody><tr><th>パラメーター</th><th>型</th><th>Null可</th><th>オプショナル</th><th>説明</th></tr><tr><td class="prmName">options</td><td class="prmType"><code><a class="idlType" href="#idl-def-MIDIOptions"><code>MIDIOptions</code></a></code></td><td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td><td class="prmOptTrue"><span role="img" aria-label="True">✔</span></td><td class="prmDesc"></td></tr></tbody></table><div><em>戻り値の型: </em><code>Promise&lt;<a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a>&gt;</code></div></dd></dl></section>
      </section>

      <section property="bibo:hasPart" resource="#midioptions-dictionary" typeof="bibo:Chapter" id="midioptions-dictionary">
        <h3 resource="#MIDIOptions" id="MIDIOptions"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.2 </span><a class="idlType" href="#idl-def-MIDIOptions"><code>MIDIOptions</code></a> ディクショナリ</span> <button onclick="OpenOriginal('midioptions-dictionary')">原文</button></h3>
        <p>このディクショナリはrequestMIDIAccess要求に渡される、オプション設定を保持します。
        </p>

        <pre class="idl"><span class="idlDictionary" id="idl-def-MIDIOptions">dictionary <span class="idlDictionaryID">MIDIOptions</span> {
<span class="idlMember">    <span class="idlMemberType">boolean</span> <span class="idlMemberName"><a href="#widl-MIDIOptions-sysex">sysex</a></span>;</span>
};</span></pre><section property="bibo:hasPart" resource="#dictionary-midioptions-members" typeof="bibo:Chapter" id="dictionary-midioptions-members"><h4 resource="#h-dictionary-midioptions-members" id="h-dictionary-midioptions-members"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.2.1 </span>ディクショナリ <a href="#idl-def-MIDIOptions" class="idlType"><code>MIDIOptions</code></a> メンバー</span> <button onclick="OpenOriginal('dictionary-midioptions-members')">原文</button></h4><dl class="dictionary-members"><dt id="widl-MIDIOptions-sysex"><code>sysex</code> <span class="idlMemberType">boolean</span>型</dt><dd>
            <p>このメンバーはその<a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a>オブジェクトによって
              システムエクスクルーシブメッセージの送受信を行う事を要求、
              または許可する事を表します。
              このメンバーがtrueに設定されたオプションが<code><a class="internalDFN" href="#dom-navigator-requestmidiaccess">requestMIDIAccess</a></code>に渡され、
              しかし、(ポリシーまたはユーザーアクションによって)、システムエクスクルーシブのサポートが否定された場合、
              アクセス要求は失敗し<code>"SecurityError"</code>エラーが発生します。
              もし、このサポートを要求しない(そして許可された)場合に、
              ユーザーがシステムエクスクルーシブメッセージを送信しようとした時には例外が発生し、
               そのポートでシステムエクスクルーシブメッセージを受信した時には全て無反応のままマスクされます。
             </p>
            <p>resolveCallbackに渡されるパラメーターの<code>options</code>では、
               このメンバーはシステムエクスクルーシブがMIDIAccess上で許可されている事を表します。
             </p>
          </dd></dl></section>
      </section>

      <section property="bibo:hasPart" resource="#midiinputmap-interface" typeof="bibo:Chapter" id="midiinputmap-interface">
        <h3 resource="#MIDIInputMap" id="MIDIInputMap"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3 </span><a class="idlType" href="#idl-def-MIDIInputMap"><code>MIDIInputMap</code></a> インターフェース</span> <button onclick="OpenOriginal('midiinputmap-interface')">原文</button></h3>

        <pre class="idl"><span class="idlInterface" id="idl-def-MIDIInputMap">interface <span class="idlInterfaceID">MIDIInputMap</span> {
<span class="idlMaplike">    readonly maplike&lt;<span class="idlMaplikeKeyType">DOMString</span>, <span class="idlMaplikeValueType"><a class="idlType" href="#idl-def-MIDIInput"><code>MIDIInput</code></a></span>&gt;;</span>
};</span></pre><section property="bibo:hasPart" resource="#maplike" typeof="bibo:Chapter" id="maplike"><h4 resource="#h-maplike" id="h-maplike"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3.1 </span>マップライク</span> <button onclick="OpenOriginal('h-maplike')">原文</button></h4>
        <p>
          これは値がMIDIInputのインスタンスで、キーはそのIDになっているマップ風のインターフェースです。
        </p></section>
        <p>この型は現在使用可能なすべてのMIDI入力ポートを表すのに使用されます。これにより、次の書き方を可能にします
        </p><pre>    // エントリーが幾つあるかを得る:
    var numberOfMIDIInputs = inputs.size;

    // それぞれのポートを&lt;select&gt;ボックスに追加する
    inputs.forEach( function( key, port ) {
      var opt = document.createElement("option");
      opt.text = port.name;
      document.getElementById("inputportselector").add(opt);
    });

    // あるいはECMAScript 6ではこのような書き方もできます:
    for (let input of inputs.values()) {
      var opt = document.createElement("option");
      opt.text = input.name;
      document.getElementById("inputportselector").add(opt);
    }</pre>
      </section>


      <section property="bibo:hasPart" resource="#midioutputmap-interface" typeof="bibo:Chapter" id="midioutputmap-interface">
        <h3 resource="#MIDIOutputMap" id="MIDIOutputMap"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.4 </span><a class="idlType" href="#idl-def-MIDIOutputMap"><code>MIDIOutputMap</code></a> インターフェース</span> <button onclick="OpenOriginal('MIDIOutputMap')">原文</button></h3>

        <pre class="idl"><span class="idlInterface" id="idl-def-MIDIOutputMap">interface <span class="idlInterfaceID">MIDIOutputMap</span> {
<span class="idlMaplike">    readonly maplike&lt;<span class="idlMaplikeKeyType">DOMString</span>, <span class="idlMaplikeValueType"><a class="idlType" href="#idl-def-MIDIOutput"><code>MIDIOutput</code></a></span>&gt;;</span>
};</span></pre><section property="bibo:hasPart" resource="#maplike-1" typeof="bibo:Chapter" id="maplike-1"><h4 resource="#h-maplike-1" id="h-maplike-1"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.4.1 </span>マップライク</span> <button onclick="OpenOriginal('h-maplike-1')">原文</button></h4>
        <p>これは値がMIDIOutputのインスタンスで、キーがそのIDになっているマップ風のインターフェースです。
        </p></section>
        <p>この型は現在使用可能なすべてのMIDI出力ポートを表すのに使用されます。これは次のような書き方を可能にします
          </p><pre>    // エントリーが幾つあるかを得る:
    var numberOfMIDIOutputs = outputs.size;

    // それぞれのポートを&lt;select&gt; ボックスに追加する
    outputs.forEach( function( key, port ) {
      var opt = document.createElement("option");
      opt.text = port.name;
      document.getElementById("outputportselector").add(opt);
    });

    // あるいはECMAScript 6ではこのような書き方もできます:
    for (output of outputs.values()) {
      var opt = document.createElement("option");
      opt.text = input.name;
      document.getElementById("inputportselector").add(opt);
    }</pre>
      </section>


      <section property="bibo:hasPart" resource="#midisuccesscallback" typeof="bibo:Chapter" id="midisuccesscallback">
        <h3 resource="#h-midisuccesscallback" id="h-midisuccesscallback"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.5 </span><a class="idlType" href="#idl-def-MIDISuccessCallback"><code>MIDISuccessCallback</code></a></span> <button onclick="OpenOriginal('h-midisuccesscallback')">原文</button></h3>

        <pre class="idl"><span class="idlCallback" id="idl-def-MIDISuccessCallback">callback <span class="idlCallbackID">MIDISuccessCallback</span> = <span class="idlCallbackType">void</span> (<span class="idlParam"><span class="idlParamType"><a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a></span> <span class="idlParamName">access</span></span>, <span class="idlParam"><span class="idlParamType"><a class="idlType" href="#idl-def-MIDIOptions"><code>MIDIOptions</code></a></span> <span class="idlParamName">options</span></span>);</span></pre><section property="bibo:hasPart" resource="#callback-midisuccesscallback-parameters" typeof="bibo:Chapter" id="callback-midisuccesscallback-parameters"><h4 resource="#h-callback-midisuccesscallback-parameters" id="h-callback-midisuccesscallback-parameters"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.5.1 </span>コールバック <a href="#idl-def-MIDISuccessCallback" class="idlType"><code>MIDISuccessCallback</code></a> パラメーター</span> <button onclick="OpenOriginal('h-callback-midisuccesscallback-parameters')">原文</button></h4>
          <dl class="callback-members"><dt id="widl-MIDISuccessCallback-access"><code>access</code> <span class="idlMemberType"><a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a>型</span></dt><dd>
            <p>
              スクリプトからユーザーのMIDIデバイスにアクセスするために作成された、<code><a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a></code>オブジェクトです。
              このオブジェクトはそれぞれのMIDIデバイスを列挙し、アクセスを得るために使用されます。
          </p><p><em>注：</em> この仕様での、"MIDIデバイス"という用語はホストシステム上で使用可能なMIDIインターフェースを指します。
            例えば、もしハードウェアのMIDIアダプターが1つだけホストシステムに接続されている時、
            例え幾つかのMIDI対応機器(シンセサイザーやドラムマシン)がそのアダプターのMIDIポートに繋がれていても、
            それは1つのデバイスとして列挙されます。
          </p></dd><dt id="widl-MIDISuccessCallback-options"><code>options</code> <span class="idlMemberType"><a class="idlType" href="#idl-def-MIDIOptions"><code>MIDIOptions</code></a>型</span></dt><dd>
            <p>
              このパラメーターはこの<a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a>
              オブジェクトで有効にするオプションを表します。
            </p>
          </dd></dl></section>
      </section>

    </section>

    <section property="bibo:hasPart" resource="#midiaccess-interface" typeof="bibo:Chapter" id="midiaccess-interface">
      <!--OddPage--><h2 resource="#MIDIAccess" id="MIDIAccess"><span property="xhv:role" resource="xhv:heading"><span class="secno">5. </span><a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a> インターフェース</span> <button onclick="OpenOriginal('MIDIAccess')">原文</button></h2>
      <p>このインターフェースはMIDI入力および出力デバイスをリストアップして、
        それぞれのデバイスへのアクセスを得るためのメソッドを持ちます。
      </p>

      <pre class="idl"><span class="idlInterface" id="idl-def-MIDIAccess">interface <span class="idlInterfaceID">MIDIAccess</span> : <span class="idlSuperclass">EventTarget</span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MIDIInputMap"><code>MIDIInputMap</code></a></span>  <span class="idlAttrName"><a href="#widl-MIDIAccess-inputs">inputs</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MIDIOutputMap"><code>MIDIOutputMap</code></a></span> <span class="idlAttrName"><a href="#widl-MIDIAccess-outputs">outputs</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType">EventHandler</span>  <span class="idlAttrName"><a href="#widl-MIDIAccess-onstatechange">onstatechange</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">boolean</span>       <span class="idlAttrName"><a href="#widl-MIDIAccess-sysexEnabled">sysexEnabled</a></span>;</span>
};</span></pre><section property="bibo:hasPart" resource="#attributes" typeof="bibo:Chapter" id="attributes"><h3 resource="#h-attributes" id="h-attributes"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.1 </span>属性</span> <button onclick="OpenOriginal('h-attributes')">原文</button></h3><dl class="attributes"><dt id="widl-MIDIAccess-inputs"><code>inputs</code> <span class="idlAttrType"><a class="idlType" href="#idl-def-MIDIInputMap"><code>MIDIInputMap</code></a></span>, readonly   型</dt><dd>システムで使用可能なMIDI入力ポートです。</dd><dt id="widl-MIDIAccess-onstatechange"><code>onstatechange</code> <span class="idlAttrType">EventHandler</span>型           </dt><dd>
          <p>新しいポートが接続された、あるいは既存のポートのstate属性が変化した時に呼ばれるハンドラーです。
          </p>
          <p>このイベントハンドラーは、<code><a href="#event-midiaccess-statechange">MIDIConnectionEvent</a></code>型に対応し、
            <code><a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a></code>インターフェースを実装した全てのオブジェクトでサポートされなくてはなりません(<em title="MUST" class="rfc2119">MUST</em>)。
          </p>
          <p id="event-midiaccess-statechange">
            ユーザーエージェントは、これまで有効でなかったMIDIポートが有効になった時、あるいは既存のポートのstate属性が変化した時にはいつでも、
            次のステップを実行しなくてはなりません(<em title="SHOULD" class="rfc2119">SHOULD</em> )：
          </p>
          <ol>
            <li>新たに有効になったポート、
              あるいはその既存のポートに対応する<code><a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a></code>
              を<code>port</code>とします。
            </li>
            <li><code><a class="idlType" href="#idl-def-MIDIConnectionEvent"><code>MIDIConnectionEvent</code></a></code>型の<code>event</code>を新たに作成し、
              その<code>port</code>属性にportをセットします。
            </li>
            <li><code>event</code>をイベントオブジェクトとして<code>MIDIAccess</code>に<code><a href="#event-midiaccess-statechange">statechange</a></code>イベントを発行します。
            </li>
          </ol>
        </dd><dt id="widl-MIDIAccess-outputs"><code>outputs</code> <span class="idlAttrType"><a class="idlType" href="#idl-def-MIDIOutputMap"><code>MIDIOutputMap</code></a></span>, readonly 型  </dt><dd>
          システムで使用可能なMIDI出力ポートです。　
        </dd><dt id="widl-MIDIAccess-sysexEnabled"><code>sysexEnabled</code> <span class="idlAttrType">boolean</span>, readonly 型  </dt><dd>
            この属性は、このMIDIAccess上でシステムエクスクルーシブのサポートが有効かどうかを示します。
          </dd></dl></section>
    </section>

    <section property="bibo:hasPart" resource="#midiport-interface" typeof="bibo:Chapter" id="midiport-interface">
      <!--OddPage--><h2 resource="#MIDIPort" id="MIDIPort"><span property="xhv:role" resource="xhv:heading"><span class="secno">6. </span><a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a> インターフェース</span> <button onclick="OpenOriginal('MIDIPort')">原文</button></h2>

      <p>これはMIDI入力または出力ポートを表すインターフェースです。</p>

      <pre class="idl"><span class="idlEnum" id="idl-def-MIDIPortType">enum <span class="idlEnumID">MIDIPortType</span> {
    "<a href="#idl-def-MIDIPortType.input" class="idlEnumItem">input</a>",
    "<a href="#idl-def-MIDIPortType.output" class="idlEnumItem">output</a>"
};</span></pre><table class="simple"><tbody><tr><th colspan="2">列挙値の説明</th></tr><tr><td><code id="idl-def-MIDIPortType.input">input</code></td><td>
  もしMIDIPortが入力ポートの場合、typeメンバーはこの値でなくてはなりません(<em title="MUST" class="rfc2119">MUST</em>)。
        </td></tr><tr><td><code id="idl-def-MIDIPortType.output">output</code></td><td>
          もしMIDIPortが出力ポートの場合、typeメンバーはこの値でなくてはなりません(<em title="MUST" class="rfc2119">MUST</em>)。
        </td></tr></tbody></table>

      <pre class="idl"><span class="idlEnum" id="idl-def-MIDIPortDeviceState">enum <span class="idlEnumID">MIDIPortDeviceState</span> {
    "<a href="#idl-def-MIDIPortDeviceState.disconnected" class="idlEnumItem">disconnected</a>",
    "<a href="#idl-def-MIDIPortDeviceState.connected" class="idlEnumItem">connected</a>"
};</span></pre><table class="simple"><tbody><tr><th colspan="2">列挙値の説明</th></tr><tr><td><code id="idl-def-MIDIPortDeviceState.disconnected">disconnected</code></td><td>
          MIDIPortが表すデバイスがシステムから切断されました。
          デバイスがシステムから切断された場合、それは関連する入力や出力のマップには現れません。
        </td></tr><tr><td><code id="idl-def-MIDIPortDeviceState.connected">connected</code></td><td>
          MIDIPortが表すデバイスが接続され、入力および出力ポートのマップに現れます。
        </td></tr></tbody></table>

      <pre class="idl"><span class="idlEnum" id="idl-def-MIDIPortConnectionState">enum <span class="idlEnumID">MIDIPortConnectionState</span> {
    "<a href="#idl-def-MIDIPortConnectionState.open" class="idlEnumItem">open</a>",
    "<a href="#idl-def-MIDIPortConnectionState.closed" class="idlEnumItem">closed</a>",
    "<a href="#idl-def-MIDIPortConnectionState.pending" class="idlEnumItem">pending</a>"
};</span></pre><table class="simple"><tbody><tr><th colspan="2">列挙値の説明</th></tr><tr><td><code id="idl-def-MIDIPortConnectionState.open">open</code></td><td>
    MIDIPortが表すデバイスがオープンされ(<a href="#widl-MIDIPort-open-Promise-MIDIPort">暗黙的、または明示的にかかわらず</a>)、
    使用可能になりました。
        </td></tr><tr><td><code id="idl-def-MIDIPortConnectionState.closed">closed</code></td><td>
          MIDIPortが表すデバイスがオープンされていません、あるいは明示的にクローズされました。MIDIPortが(<code><a href="#widl-MIDIPort-open-Promise-MIDIPort">open()</a></code>によって)明示的にオープンされるか(入力ポートに対して<a href="#widl-MIDIInput-onmidimessage">midimessage</a> イベントハンドラーが追加されるか、出力ポートに対して<a href="#widl-MIDIOutput-send-void-sequence-octet--data-double-timestamp">send()</a>を呼び出すことで)
          暗黙的にオープンされるまで、これはデバイスのデフォルトの状態です。
        </td></tr><tr><td><code id="idl-def-MIDIPortConnectionState.pending">pending</code></td><td>
          MIDIPortが表すデバイスが(<a href="#widl-MIDIPort-open-Promise-MIDIPort">暗黙的にまたは明示的に</a>)オープンされましたが、
          デバイスはその後切断され、使用できない状態です。
          もしそのデバイスが<code><a href="#widl-MIDIPort-onstatechange">statechange</a></code>イベントより前に再接続されれば、
          システムはデバイスの再オープンを(<a href="#dfn-algorithm-to-open-a-midiport">MIDIPortをオープンするアルゴリズム</a>に従って)
          試みなければなりません。これによって接続状態は"open"または"closed"に遷移します。
        </td></tr></tbody></table>

      <pre class="idl"><span class="idlInterface" id="idl-def-MIDIPort">interface <span class="idlInterfaceID">MIDIPort</span> : <span class="idlSuperclass">EventTarget</span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMString</span>               <span class="idlAttrName"><a href="#widl-MIDIPort-id">id</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMString?</span>              <span class="idlAttrName"><a href="#widl-MIDIPort-manufacturer">manufacturer</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMString?</span>              <span class="idlAttrName"><a href="#widl-MIDIPort-name">name</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MIDIPortType"><code>MIDIPortType</code></a></span>            <span class="idlAttrName"><a href="#widl-MIDIPort-type">type</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">DOMString?</span>              <span class="idlAttrName"><a href="#widl-MIDIPort-version">version</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MIDIPortDeviceState"><code>MIDIPortDeviceState</code></a></span>     <span class="idlAttrName"><a href="#widl-MIDIPort-state">state</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MIDIPortConnectionState"><code>MIDIPortConnectionState</code></a></span> <span class="idlAttrName"><a href="#widl-MIDIPort-connection">connection</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType">EventHandler</span>            <span class="idlAttrName"><a href="#widl-MIDIPort-onstatechange">onstatechange</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType">Promise&lt;<a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a>&gt;</span> <span class="idlMethName"><a href="#widl-MIDIPort-open-Promise-MIDIPort">open</a></span> ();</span>
<span class="idlMethod">    <span class="idlMethType">Promise&lt;<a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a>&gt;</span> <span class="idlMethName"><a href="#widl-MIDIPort-close-Promise-MIDIPort">close</a></span> ();</span>
};</span></pre><section property="bibo:hasPart" resource="#attributes-1" typeof="bibo:Chapter" id="attributes-1"><h3 resource="#h-attributes-1" id="h-attributes-1"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.1 </span>属性</span> <button onclick="OpenOriginal('h-attributes-1')">原文</button></h3><dl class="attributes"><dt id="widl-MIDIPort-connection"><code>connection</code> <span class="idlAttrType"><a class="idlType" href="#idl-def-MIDIPortConnectionState"><code>MIDIPortConnectionState</code></a></span>, readonly 型  </dt><dd>デバイスの接続状態。</dd><dt id="widl-MIDIPort-id"><code>id</code> <span class="idlAttrType">DOMString</span>, readonly 型  </dt><dd>
          <p>
            ポートのユニークIDです。 開発者はこれを、ユーザーがアプリケーション内で選択したポートを記憶しておくために使用できます。
            ユーザーエージェントは<code>id</code>がそのポートだけのユニークなものである事を保証しなくてはなりません
            (<em title="MUST" class="rfc2119">MUST</em>)。
            ユーザーエージェントはその<code>id</code>がアプリケーションのインスタンスをまたいで、
            例えば、システムがリブートした時、
            デバイスがシステムから取り外された時にも維持される事を保証しなくてはなりません(<em title="SHOULD" class="rfc2119">SHOULD</em>)。
            アプリケーションはMIDI設定を再現するため、これらのidをローカルにキャッシュしようとするかも知れません。
            システムによっては完全に永続的なユニーク性を持つ識別手段をサポートしていないかも知れず、
            そのような場合、別のインターフェースが接続されたりシステムから切断された時に識別を維持し続けるのは難易度が高くなるでしょう
             (これによって要求されたポートのインデックスがずれるかも知れません)。
             システムはMIDI APIのインスタンスをまたいだポートのマッチングに最善の方法を取る事が期待されます：
             例えばある実装ではポートインターフェースの製造者、名前、インデックスをなんらかの形でハッシュしてidとし、不透明な手段で
             使用して、ポートが接続された時にポートのidが一致するものを参照するかも知れません。
              アプリケーションはMIDIPortのidの比較を品質のテストのために使用するかも知れません。
            </p>
        </dd><dt id="widl-MIDIPort-manufacturer"><code>manufacturer</code> <span class="idlAttrType">DOMString</span>, readonly   , nullable　型</dt><dd>
          <p>ポートの製造者名です。</p>
        </dd><dt id="widl-MIDIPort-name"><code>name</code> <span class="idlAttrType">DOMString</span>, readonly   , nullable　型</dt><dd>
          <p>ポートのシステム名です。</p>
        </dd><dt id="widl-MIDIPort-onstatechange"><code>onstatechange</code> <span class="idlAttrType">EventHandler</span>　型            </dt><dd>
          <p>存在していたポートの状態が変化した時、または接続された時に呼び出されるハンドラーです。
          </p>
          <p>この<code><a href="#event-midiport-statechange">statechange</a></code>型のイベントハンドラーは
            <code><a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a></code>インターフェースを
            実装するすべてのオブジェクトでサポートされなくてはなりません(<em title="MUST" class="rfc2119">MUST</em>)。
          </p>
        </dd><dt id="widl-MIDIPort-state"><code>state</code> <span class="idlAttrType"><a class="idlType" href="#idl-def-MIDIPortDeviceState"><code>MIDIPortDeviceState</code></a></span>, readonly 型  </dt><dd>
          デバイスの状態です。
          </dd><dt id="widl-MIDIPort-type"><code>type</code> <span class="idlAttrType"><a class="idlType" href="#idl-def-MIDIPortType"><code>MIDIPortType</code></a></span>, readonly 型  </dt><dd>
          <p>そのポートが入力ポートか出力ポートかを区別する識別子です。
            <code><a class="idlType" href="#idl-def-MIDIOutput"><code>MIDIOutput</code></a></code>の場合、 これは<code>"output"</code>にならなくてはなりません(<em title="MUST" class="rfc2119">MUST</em>)。 <code><a class="idlType" href="#idl-def-MIDIInput"><code>MIDIInput</code></a></code>の場合、
            これは<code>"input"</code>にならなくてはなりません(<em title="MUST" class="rfc2119">MUST</em>)。
          </p>
        </dd><dt id="widl-MIDIPort-version"><code>version</code> <span class="idlAttrType">DOMString</span>, readonly   , nullable　型</dt><dd>
          <p>ポートのバージョンです。</p>
        </dd></dl></section><section property="bibo:hasPart" resource="#methods-1" typeof="bibo:Chapter" id="methods-1"><h3 resource="#h-methods-1" id="h-methods-1"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.2 </span>メソッド</span> <button onclick="OpenOriginal('h-methods-1')">原文</button></h3><dl class="methods"><dt id="widl-MIDIPort-close-Promise-MIDIPort"><code>close</code></dt><dd>
          <p>
            <code><a href="#idl-def-MIDIPort">MIDIPort</a></code>に対応するMIDIデバイスを
            明示的に使用不能にします(この後状態は"open"から"connected"になります)。
            このメソッドの呼び出しが成功すると
            (新しいハンドラーの設定による暗黙的なopen()にかかわらず)MIDIメッセージはMIDI入力ポートのMIDIMessageEventハンドラーに
            もう伝達されなく事に注意してください。
          </p>
          <p>下層の実装はこの呼び出しに対して何もする必要がないかも知れません。
            しかしながら下層の実装によってはMIDIデバイスへの共有アクセスをサポートしていないかも知れないため、
            明示的なclose()呼び出しはMIDIアプリケーションに他のアプリケーションにデバイスへのアクセス
            を取得する事が可能な事を保証します。
          </p>
          <p>
            呼び出された時、このメソッドはユーザーのシステム上で指定のMIDIポートへのアクセス
            要求をあらわすPromiseオブジェクトを返します。
            ポートがクローズされた時、(つまり排他的なアクセスのシステムではそのポートが他の
            アプリケーションから使用可能になった時)、Promiseの<var>resolveCallback</var>
            が<code><a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a></code>を
            引数として呼び出されます。
            もしポートが切断された場合、(設定されていれば)Promiseの<var>rejectCallback</var>が
            呼び出されます。
          </p>
          <p>
            <code>close()</code>メソッドが呼び出された時、ユーザーエージェントは
            <dfn id="dfn-algorithm-to-close-a-midiport">MIDIPortクローズのアルゴリズム</dfn>
            を実行しなくてはなりません(<em title="MUST" class="rfc2119">MUST</em>):</p>

          <ol>
            <li><p>
              新たにPromiseオブジェクト、<var>promise</var>を作成し、<var>resolver</var>を
              対応するリゾルバーとします。
            </p></li>
            <li><p><var>promise</var>を返却し、次のステップを非同期に実行します。
            </p></li>

            <li><p><var>port</var>を与えられた<code><a href="#idl-def-MIDIPort">MIDIPort</a></code>オブジェクトとします。</p></li>

            <li><p>もし、portが既に閉じられている(その<code><a href="#widl-MIDIPort-connection">.connection</a></code>が
              <code><a href="#idl-def-MIDIPortConnectionState.closed">"closed"</a></code>、例えばそのポートがまだ暗黙的にも明示的にも
              オープンされていない、あるいはこの<code><a href="#idl-def-MIDIPort">MIDIPort</a></code>で<code><a href="#widl-MIDIPort-close-Promise-MIDIPort">close()</a></code>が既に呼ばれている)場合、下の<em><b>closed</b></em>
              ラベルに飛びます。
            </p></li>

            <li><p>
              もしそのポートが入力ポートの場合、次のステップに進みます。
              もし出力ポートで<code><a href="#widl-MIDIPort-state">.state</a></code>が
              <code><a href="#idl-def-MIDIPortDeviceState.connected">"connected"</a></code>で
              ない場合、すべての保留されている送信データをクリアし、次のステップに進みます。
              タイムスタンプが未来のシステム内の保留されている送信データをすべてクリアし、
              次のステップに進む前にタイムスタンプが過去または現在のすべての送信メッセージの送信を終了します。
            </p></li>

            <li><p>
              下層のシステムをオープンしているならポートへのアクセスをすべてクローズし、
              下層システムのブロックしているリソースを解放します。
            </p></li>

            <li><p>
              <em><b>成功</b></em>: MIDIPortの<code>connection</code>属性を<code>"closed"</code>に
              変更し、新しい<code><a class="idlType" href="#idl-def-MIDIConnectionEvent"><code>MIDIConnectionEvent</code></a></code>
              を<code><a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a></code>の<code><a href="#event-midiaccess-statechange">statechange</a></code>ハンドラーおよび、<code><a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a></code>の<code><a href="#event-midiport-statechange">statechange</a></code>ハンドラーに発行します。
            </p>

            </li><li><p><em><b>クローズ</b></em>:
              <var>resolver</var>の<code>accept(value)</code>メソッドを<var>port</var>を引数として呼び出します。
            </p></li>

            <li><p>これらのステップの実行を終了します。</p></li>

            <li><p><em><b>失敗</b></em>:
              <code>DOMException</code>を新たに作成し、<var>error</var>とします。
              ポートが切断された場合、この例外の.nameは<code>"InvalidStateError"</code>でなくてはなりません。
            </p></li>

            <li><p><var>resolver</var>の<code>reject(value)</code>メソッドを
              <var>error</var>を引数として呼び出します。
            </p></li>
          </ol>
        <div><em>パラメーターなし。</em></div><div><em>戻り値の型: </em><code>Promise&lt;<a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a>&gt;</code></div></dd><dt id="widl-MIDIPort-open-Promise-MIDIPort"><code>open</code></dt><dd>
          <p>
            <a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a>に対応するMIDIデバイスを明示的に
            使用可能にします。
            この呼び出しは<a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a>を使用するために
            必須のものではない事に注意してください -
            <a class="idlType" href="#idl-def-MIDIOutput"><code>MIDIOutput</code></a>の<code>send()</code>
            の呼び出し、またはMIDIInputPortにMIDIMessageEventハンドラーを設定する事で暗黙的にopen()を実行する
            事ができます。
            下層の実装はこの呼び出しに対して何もする必要がないかも知れません。
              しかしながら下層の実装によってはMIDIデバイスへの共有アクセスをサポートしていないかも知れないため、
              明示的なopen()およびclose()呼び出しを使う事でMIDIアプリケーションがデバイスへの排他アクセスを予想して
              制御する事が可能になります。
          </p>
          <p>
            呼び出された時、このメソッドは与えられたユーザーシステムのMIDIポートへのアクセス要求を表す
            Promiseオブジェクトを返します。
          </p>
          <p>
            もしそのポートが<code><a href="#idl-def-MIDIPortDeviceState.connected">"connected"</a></code>
            状態であってポートへのアクセスが取得できれば(そしてそのポートで入出力が可能になれば)、
            Promiseの<var>resolveCallback</var>が<code><a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a></code>オブジェクトを引数として
            呼び出されます。
          </p>
          <p>
            connected状態のポートへのアクセスができなかった場合(例えば、排他的アクセスシステムの
            プラットフォームでそのポートが既に使用中になっていた場合)、Promiseは(設定されていれば)
            <var>rejectCallback</var>を呼び出します。
          </p>
          <p>
            もしcode><a href="#idl-def-MIDIPortDeviceState.disconnected">"disconnected"</a></code>
            状態のポートに対して<code>open()</code>が呼び出された場合、
            そのポートの<code><a href="">.connection</a></code>は
            ポートが<code><a href="#idl-def-MIDIPortDeviceState.connected">"connected"</a></code>
            状態に移行するかすべての参照が無くなるまで、
            <code><a href="#idl-def-MIDIPortConnectionState.pending">"pending"</a></code>に遷移します。
          </p><p id="midiport-open-algorithm">
            このメソッドが呼び出された時、ユーザーエージェントは
            <dfn id="dfn-algorithm-to-open-a-midiport">MIDIPortオープンのアルゴリズム</dfn>を実行します
            (<em title="MUST" class="rfc2119">MUST</em>):
          </p>

          <ol>
            <li><p>
              新しいPromiseオブジェクト、<var>promise</var>を作成し、
              結び付けられるリゾルバーを<var>resolver</var>とします。</p></li>

            <li><p>
              <var>promise</var>を返却し、次のステップを非同期的に実行します。</p></li>

            <li><p>
              <var>port</var>を与えられた<code><a href="#idl-def-MIDIPort">MIDIPort</a></code>オブジェクトとします。
              </p></li>

            <li><p>
              もしデバイスの状態が既に<code><a href="#idl-def-MIDIPortConnectionState.open">"open"</a></code>
              の場合、(例えば このMIDIPortのopen()が既に呼ばれている、または暗黙的にオープンされている場合)、
              下の<em>opened</em>ラベルのステップにジャンプします。
            </p></li>

            <li><p>
              もしデバイスの状態が<code><a href="#idl-def-MIDIPortConnectionState.pending">"pending"</a></code>
              の場合(例えば既にオープンされ、その後デバイスが切断されている場合)、
              下の<em>opened</em>ラベルのステップにジャンプします。
            </p></li>

            <li><p>
              もしデバイスの状態が<code><a href="#idl-def-MIDIPortDeviceState.disconnected">"disconnected"</a></code>の場合、
              <code><a href="#idl-def-MIDIPort">MIDIPort</a></code> の<code><a href="">state</a></code>属性は
              <code><a href="#idl-def-MIDIPortConnectionState.pending">"pending"</a></code>に変化し、
              新しい<code><a href="#idl-def-MIDIConnectionEvent">MIDIConnectionEvent</a></code>
              が<code><a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a></code>の
              <code><a href="#event-midiaccess-statechange">statechange</a></code>ハンドラーと
              <code><a href="#idl-def-MIDIPort">MIDIPort</a></code>の<code><a href="#event-midiport-statechange">statechange</a></code>ハンドラーに発行され、
              下の<em>opened</em>ラベルのステップにジャンプします。
            </p></li>

            <li><p>
              システム内のMIDIデバイスへのアクセスの取得を試みます。
              もしそのデバイスが使用不能の場合(例えば、既に他のプロセスで使用されていてオープンできない、あるいは切断された場合)
              下の<em>失敗</em>ラベルのステップにジャンプします。
              もしそのデバイスが使用可能でアクセスを取得できた場合、次のステップを続けます。
            </p></li>

            <li><p>
              <em><b>成功</b></em>: MIDIPortの<code>state</code>属性を<code>"opened"</code>に変更し、
              新しい<code><a class="idlType" href="#idl-def-MIDIConnectionEvent"><code>MIDIConnectionEvent</code></a></code>
              を<code><a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a></code>の
              <code><a href="#event-midiaccess-statechange">statechange</a></code>ハンドラーと
              <code><a href="#idl-def-MIDIPort">MIDIPort</a></code>の
              <code><a href="#event-midiport-statechange">statechange</a></code>ハンドラーに
              発行します。
            </p></li>

            <li><p>
              もしこのポートが出力ポートで何らかの送信待ちの保留データを持っている場合、
              そのデータの送信を非同期に開始します。
            </p></li>

            <li><p><em><b>opened</b></em>:
              <var>resolver</var>の<code>accept(value)</code>メソッドを<var>port</var>を
              引数として呼び出します。
            </p></li>

            <li><p>これらのステップの実行を終了します。Terminate these steps.</p></li>

            <li><p><em><b>失敗</b></em>:
              新たな<code>DOMException</code>、<var>error</var>を作成します。
              この例外の.nameは、もしポートが使用不能の場合、<code>"InvalidAccessError"</code>、
              また、ポートが切断されている場合は<code>"InvalidStateError"</code>となります。
            </p></li>

            <li><p>
              <var>resolver</var>の<code>reject(value)</code>メソッドを
              <var>error</var>を引数として呼び出します。
            </p></li>
          </ol>
        <div><em>パラメーターなし。</em></div><div><em>戻り値の型: </em><code>Promise&lt;<a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a>&gt;</code></div></dd></dl></section>

      <p id="event-midiport-statechange">
        <code><a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a></code>に対応する
        MIDIポートの状態属性が変化した時はいつでも、
        ユーザーエージェントは以下のステップを実行します(<em title="SHOULD" class="rfc2119">SHOULD</em>) :
        </p>

        <ol>
          <li>
            <p>
              <code>port</code>を<code><a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a></code>とします。
            </p>
          </li>

          <li>
            <p>
              新たな<code><a class="idlType" href="#idl-def-MIDIConnectionEvent"><code>MIDIConnectionEvent</code></a></code>
              、<code>event</code>を作成して<code>port</code>属性をそのポートに設定します。
            </p>
          </li>

          <li>
            <p>
              <a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a>の
              <code><a href="#event-midiport-statechange">statechange</a></code>、および
              <a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a>の
              <code><a href="#event-midiaccess-statechange">statechange</a></code>
              イベントを<code>event</code>をイベントオブジェクトとして発行します。
            </p>
          </li>
        </ol>

      <section property="bibo:hasPart" resource="#midiinput-interface" typeof="bibo:Chapter" id="midiinput-interface">
        <h3 resource="#MIDIInput" id="MIDIInput"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.3 </span><a class="idlType" href="#idl-def-MIDIInput"><code>MIDIInput</code></a> インターフェース</span> <button onclick="OpenOriginal('MIDIInput')">原文</button></h3>

        <pre class="idl"><span class="idlInterface" id="idl-def-MIDIInput">interface <span class="idlInterfaceID">MIDIInput</span> : <span class="idlSuperclass"><a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a></span> {
<span class="idlAttribute">                attribute <span class="idlAttrType">EventHandler</span> <span class="idlAttrName"><a href="#widl-MIDIInput-onmidimessage">onmidimessage</a></span>;</span>
};</span></pre><section property="bibo:hasPart" resource="#attributes-2" typeof="bibo:Chapter" id="attributes-2"><h4 resource="#h-attributes-2" id="h-attributes-2"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.3.1 </span>属性</span> <button onclick="OpenOriginal('h-attributes-2')">原文</button></h4><dl class="attributes"><dt id="widl-MIDIInput-onmidimessage"><code>onmidimessage</code> <span class="idlAttrType">EventHandler</span>型            </dt><dd>
            <p>
              このイベントハンドラーは<code><a href="#event-midiinput-message">MIDIMessage</a></code>型に対応し、
              <code><a class="idlType" href="#idl-def-MIDIInput"><code>MIDIInput</code></a></code>インターフェース
              を実装する全てのオブジェクトでサポートされなくてはなりません
              (<em title="MUST" class="rfc2119">MUST</em>)。
            </p>
            <p>
              もしハンドラーが設定され、状態属性が<code>"opened"</code>でない場合、下層の実装はポートを使用可能にしようとし、
              状態属性を<code>"opened"</code>にします。
              もし成功すれば<code><a class="idlType" href="#idl-def-MIDIConnectionEvent"><code>MIDIConnectionEvent</code></a></code>
              イベントが対応する<code>MIDIPort</code>と<code>MIDIAccess</code>に対して発行されます。
          </p></dd></dl></section>

      <p id="event-midiinput-message">
        <code><a class="idlType" href="#idl-def-MIDIInput"><code>MIDIInput</code></a></code>に対応するMIDIポートが
        1つ以上のMIDIメッセージを受信した際にはいつでも、ユーザーエージェントは以下のステップを実行しなくてはなりません
        (<em title="MUST" class="rfc2119">MUST</em>)：
        </p>

        <ol>
          <li>
            <p>
              <code>port</code>を対象の<code><a class="idlType" href="#idl-def-MIDIInput"><code>MIDIInput</code></a></code>とします。
            </p>
          </li>

          <li>
            <p>
              もし<code><a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a></code>
              がシステムエクスクルーシブを許可されておらず、そのメッセージがシステムエクスクルーシブの場合はこの手順を中断します。
            </p>
          </li>

          <li>
            <p>
              新たに<code><a class="idlType" href="#idl-def-MIDIMessageEvent"><code>MIDIMessageEvent</code></a></code>
              を作成して<code>event</code>とし、
              <code>timestamp</code>属性はシステムがメッセージを受信した時刻、
              <code>data</code>属性は単一のMIDIメッセージを表すUint8ArrayのMIDIデータのバイト配列に設定します。
            </p>
          </li>

          <li>
            <p>
              <code>event</codeをイベントオブジェクトとして、
                <code>port</code>に対して
                <code><a href="#event-midiinput-message">midimessage</a></code>イベントを発行します。
            </p>
          </li>
        </ol>
        <p>特に注意を要するのは、入力ストリームの他のメッセージの途中でMIDIシステムリアルタイムメッセージが発生した時です。
          この場合、そのシステムリアルタイムメッセージは発生する度にディスパッチされ、通常のメッセージはそれが完結するまで
          バッファされます (完結後ディスパッチされます)。
        </p>

      </section>

      <section property="bibo:hasPart" resource="#midioutput-interface" typeof="bibo:Chapter" id="midioutput-interface">
        <h3 resource="#MIDIOutput" id="MIDIOutput"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.4 </span><a class="idlType" href="#idl-def-MIDIOutput"><code>MIDIOutput</code></a> インターフェース</span> <button onclick="OpenOriginal('MIDIOutput')">原文</button></h3>

        <pre class="idl"><span class="idlInterface" id="idl-def-MIDIOutput">interface <span class="idlInterfaceID">MIDIOutput</span> : <span class="idlSuperclass"><a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a></span> {
<span class="idlMethod">    <span class="idlMethType">void</span> <span class="idlMethName"><a href="#widl-MIDIOutput-send-void-sequence-octet--data-double-timestamp">send</a></span> (<span class="idlParam"><span class="idlParamType">sequence&lt;<a class="internalDFN" href="#OctetDfn">octet</a>&gt;</span> <span class="idlParamName">data</span></span>, <span class="idlParam">optional <span class="idlParamType">double</span> <span class="idlParamName">timestamp</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType">void</span> <span class="idlMethName"><a href="#widl-MIDIOutput-clear-void">clear</a></span> ();</span>
};</span></pre><section property="bibo:hasPart" resource="#methods-2" typeof="bibo:Chapter" id="methods-2"><h4 resource="#h-methods-2" id="h-methods-2"><span property="xhv:role" resource="xhv:heading"><span class="secno">6.4.1 </span>メソッド</span> <button onclick="OpenOriginal('h-methods-2')">原文</button></h4><dl class="methods"><dt id="widl-MIDIOutput-clear-void"><code>clear</code></dt><dd>
            <p>
              <code>MIDIOutput</code>のキューからまだ送られていないすべての保留中の送信データをクリアします。
              実装はMIDIストリームが正常な状態に維持される事を保証する必要があり、もし出力ポートがsysexメッセージの途中にあった場合は
              sysexを終端するバイト(0xf7)が送信されなくてはなりません。
              </p>
          <div><em>パラメーターなし。</em></div><div><em>戻り値の型: </em><code>void</code></div></dd><dt id="widl-MIDIOutput-send-void-sequence-octet--data-double-timestamp"><code>send</code></dt><dd>
            <p>
              対応するMIDIポートのキューに送信するメッセージを登録します。
              実装は(もし必要なら)シーケンスの各メンバーを強制的にunsigned 8ビット整数にします。
              Uint8Arrayでなくシーケンスを使う事で、開発者はoutput.send( new Uint8Array( [ 0x90, 0x45, 0x7f ] ) );のようにUint8Arrayを作る事なく、output.send( [ 0x90, 0x45, 0x7f ] );のような便利な書き方ができます (例えばスタンダードMIDIファイルを読んだり、SysExメッセージを送信するような)
              大きなMIDIデータを使うシナリオではUint8Arrayを使う方が効率的ですが)。
            </p>
            <p>
              dataは1つ以上の有効な完結したMIDIメッセージを含む事ができます。
              下層のシステムがサポートしていない可能性があるのと同様、data中にランニングステータスは使用できません。
            </p>
            <p>
              もし、<var>data</var>が有効なシーケンスでない、あるいは有効なMIDIメッセージを含んでいない場合、<code>TypeError</code>
              例外が発生します。
            </p>
            <p>
              もし<var>data</var>がシステムエクスクルーシブメッセージで、
              <code><a class="idlType" href="#idl-def-MIDIAccess"><code>MIDIAccess</code></a></code>
              がシステムエクスクルーシブへのアクセスが許可されていない場合、
              <code>InvalidAccessError</code>例外が発生します。
            </p>
            <p>
              もしポートが<code><a href="#idl-def-MIDIPortDeviceState.disconnected">"disconnected"</a></code>状態
              の場合、<code>InvalidStateError</code>例外が発生します。
            </p>
            <p>
              もしポートが<code><a href="#idl-def-MIDIPortDeviceState.connected">"connected"</a></code>状態
              であるがコネクションが<code><a href="#idl-def-MIDIPortConnectionState.closed">"closed"</a></code>の場合、
              <a href="#midiport-open-algorithm">ポートのオープン</a>を非同期で試みます。
            </p>

          <table class="parameters"><tbody><tr><th>パラメーター</th><th>型</th><th>Null可</th><th>オプショナル</th><th>説明</th></tr><tr><td class="prmName">data</td><td class="prmType"><code>sequence&lt;<a class="internalDFN" href="#OctetDfn">octet</a>&gt;</code></td><td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td><td class="prmOptFalse"><span role="img" aria-label="False">✘</span></td><td class="prmDesc">
            キューに登録されるデータ。シーケンスの各エントリーは1バイトのデータを表します。
              </td></tr><tr><td class="prmName">timestamp</td><td class="prmType"><code>double</code></td><td class="prmNullFalse"><span role="img" aria-label="False">✘</span></td><td class="prmOptTrue"><span role="img" aria-label="True">✔</span></td><td class="prmDesc">
                ポートにデータの送信を開始する時刻です (<a href="#DomHighResTimeStampDfn">DOMHighResTimeStamp</a> -
                ドキュメントへのナビゲーション開始からの相対時間でミリ秒で表されます)。 もし<code>timestamp</code>が存在しない場合、
                または0(あるいは既に過ぎた時刻)を指定された場合、データは可能な限り即時に送信されます。
              </td></tr></tbody></table><div><em>戻り値の型: </em><code>void</code></div></dd></dl></section>
      </section>
    </section>

    <section property="bibo:hasPart" resource="#midimessageevent-interface" typeof="bibo:Chapter" id="midimessageevent-interface">
      <!--OddPage--><h2 resource="#MIDIMessageEvent" id="MIDIMessageEvent"><span property="xhv:role" resource="xhv:heading"><span class="secno">7. </span><a class="idlType" href="#idl-def-MIDIMessageEvent"><code>MIDIMessageEvent</code></a> インターフェース</span> <button onclick="OpenOriginal('MIDIMessageEvent')">原文</button></h2>
      <p>
        MIDIメッセージを受信した時、このインターフェースを実装したイベントオブジェクトが、MIDIInputのonmidimessageハンドラーに渡されます。</p>
      <pre class="idl"><span class="idlInterface" id="idl-def-MIDIMessageEvent">[<span class="extAttr">Constructor(DOMString type, optional MIDIMessageEventInit eventInitDict)</span>]
interface <span class="idlInterfaceID">MIDIMessageEvent</span> : <span class="idlSuperclass"><a class="internalDFN" href="#dfn-event">Event</a></span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">double</span>     <span class="idlAttrName"><a href="#widl-MIDIMessageEvent-receivedTime">receivedTime</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a class="internalDFN" href="#dfn-uint8array">Uint8Array</a></span> <span class="idlAttrName"><a href="#widl-MIDIMessageEvent-data">data</a></span>;</span>
};</span></pre><section property="bibo:hasPart" resource="#attributes-3" typeof="bibo:Chapter" id="attributes-3"><h3 resource="#h-attributes-3" id="h-attributes-3"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.1 </span>属性</span> <button onclick="OpenOriginal('h-attributes-3')">原文</button></h3><dl class="attributes"><dt id="widl-MIDIMessageEvent-data"><code>data</code> <span class="idlAttrType"><a class="internalDFN" href="#dfn-uint8array">Uint8Array</a></span>, readonly 型  </dt><dd>
          <p>1つのMIDIメッセージのデータのバイト列を含むUint8Arrayです。</p>
        </dd><dt id="widl-MIDIMessageEvent-receivedTime"><code>receivedTime</code> <span class="idlAttrType">double</span>, readonly  型 </dt><dd>
          <p>イベントがいつ発生したのかを示す<code>DOMHighResTimeStamp</code>です。</p>
          <div class="note"><div id="h-note1" role="heading" aria-level="4" class="note-title"><span>注</span></div><p class="">
            DOM4<a class="externalDFN">イベント</a>オブジェクトは現在時刻を表すtimeStampメンバーを持っていますが、
            その精度は低く、(DOMTimeStampは整数値でミリ秒を表します)、
            また異なる時刻0の原点を取ります(DOMTimeStampは1970年1月1日 00:00:00 UTCからのミリ秒)。
            そのため、MIDIアプリケーションで使用するには適切ではありません。
          </p></div>
        </dd></dl></section>
      <section property="bibo:hasPart" resource="#midimessageeventinit-interface" typeof="bibo:Chapter" id="midimessageeventinit-interface">
        <h3 resource="#MIDIMessageEventInit" id="MIDIMessageEventInit"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.2 </span><a class="idlType" href="#idl-def-MIDIMessageEventInit"><code>MIDIMessageEventInit</code></a> インターフェース</span> <button onclick="OpenOriginal('MIDIMessageEventInit')">原文</button></h3>
        <pre class="idl"><span class="idlDictionary" id="idl-def-MIDIMessageEventInit">dictionary <span class="idlDictionaryID">MIDIMessageEventInit</span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember">    <span class="idlMemberType">double</span>     <span class="idlMemberName"><a href="#widl-MIDIMessageEventInit-receivedTime">receivedTime</a></span>;</span>
<span class="idlMember">    <span class="idlMemberType"><a class="internalDFN" href="#dfn-uint8array">Uint8Array</a></span> <span class="idlMemberName"><a href="#widl-MIDIMessageEventInit-data">data</a></span>;</span>
};</span></pre><section property="bibo:hasPart" resource="#dictionary-midimessageeventinit-members" typeof="bibo:Chapter" id="dictionary-midimessageeventinit-members"><h4 resource="#h-dictionary-midimessageeventinit-members" id="h-dictionary-midimessageeventinit-members"><span property="xhv:role" resource="xhv:heading"><span class="secno">7.2.1 </span>ディクショナリ <a href="#idl-def-MIDIMessageEventInit" class="idlType"><code>MIDIMessageEventInit</code></a> メンバー</span> <button onclick="OpenOriginal('h-dictionary-midimessageeventinit-members')">原文</button></h4><dl class="dictionary-members"><dt id="widl-MIDIMessageEventInit-data"><code>data</code> <span class="idlMemberType"><a class="internalDFN" href="#dfn-uint8array">Uint8Array 型</a></span></dt><dd>
            <p>1つのMIDIメッセージのデータのバイト列を含むUint8Arrayです。</p>
          </dd><dt id="widl-MIDIMessageEventInit-receivedTime"><code>receivedTime</code> <span class="idlMemberType">double 型</span></dt><dd>
            <p>イベントがいつ発生したのかを示す<code>DOMHighResTimeStamp</code>です。</p>
          </dd></dl></section>
      </section>
    </section>

    <section property="bibo:hasPart" resource="#midiconnectionevent-interface" typeof="bibo:Chapter" id="midiconnectionevent-interface">
      <!--OddPage--><h2 resource="#MIDIConnectionEvent" id="MIDIConnectionEvent"><span property="xhv:role" resource="xhv:heading"><span class="secno">8. </span><a class="idlType" href="#idl-def-MIDIConnectionEvent"><code>MIDIConnectionEvent</code></a> インターフェース</span> <button onclick="OpenOriginal('MIDIConnectionEvent')">原文</button></h2>
      <p>
        新しいポートが使用可能になった時、(例えばMIDIデバイスが最初にコンピューターに接続された時)、
        以前使用可能だったポートが使用不能になった時、または再度使用可能になった時、
        (例えばMIDIインターフェースが切断され、また接続された時)、
        このインターフェースを実装したイベントオブジェクトがMIDIAccessのonstatechangeハンドラーに渡されます。
        また(もしあれば)そのポートを参照する<code><a href="#idl-def-MIDIPort">MIDIPort</a></code>のonstatechangeハンドラー
        にも渡されます。
        </p>
      <p>
        <code><a href="#idl-def-MIDIPort">MIDIPort</a></code>が
        <code><a href="#idl-def-MIDIPortConnectionState.pending">"pending"</a></code>状態にあり、
        そのデバイスがホストシステムに再接続された時は、
        <code><a href="#event-midiaccess-statechange">statechange</a></code>イベントが
        発行される前に
        <a href="#midiport-open-algorithm">MIDIPortオープンのアルゴリズム</a>が実行され、
        再オープンを試みます。
        もしこの遷移が失敗した場合は (例えばそのポートが下層システムの何かで予約され使用できないなど)、
        接続状態は"closed"に遷移し、そうでなければ"open"に遷移します。
        これはそのデバイスの状態変化の<code><a href="#event-midiaccess-statechange">statechange</a></code>
        イベント発行に先立って行わます。そのためイベントではデバイスの状態と同様に最終的な接続状態を反映
        します。
        </p>
      <p>
        下層のシステムによってはデバイスの接続状態に関するイベントを提供しない場合があります。そのような
        システムでは新しいデバイスをまれにしかポーリングせず、大きなディレイが発生するかも知れません。
        このような事情で、接続イベントに大きくは依存しないほうが良いでしょう。
      </p>

      <pre class="idl"><span class="idlInterface" id="idl-def-MIDIConnectionEvent">[<span class="extAttr">Constructor(DOMString type, optional MIDIConnectionEventInit eventInitDict)</span>]
interface <span class="idlInterfaceID">MIDIConnectionEvent</span> : <span class="idlSuperclass"><a class="internalDFN" href="#dfn-event">Event</a></span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a></span> <span class="idlAttrName"><a href="#widl-MIDIConnectionEvent-port">port</a></span>;</span>
};</span></pre><section property="bibo:hasPart" resource="#attributes-4" typeof="bibo:Chapter" id="attributes-4"><h3 resource="#h-attributes-4" id="h-attributes-4"><span property="xhv:role" resource="xhv:heading"><span class="secno">8.1 </span>属性</span> <button onclick="OpenOriginal('h-attributes-4')">原文</button></h3><dl class="attributes"><dt id="widl-MIDIConnectionEvent-port"><code>port</code> <span class="idlAttrType"><a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a></span>, readonly 型  </dt><dd>
          <p>接続または切断されたポートです。</p>
        </dd></dl></section>

      <section property="bibo:hasPart" resource="#midiconnectioneventinit-interface" typeof="bibo:Chapter" id="midiconnectioneventinit-interface">
        <h3 resource="#MIDIConnectionEventInit" id="MIDIConnectionEventInit"><span property="xhv:role" resource="xhv:heading"><span class="secno">8.2 </span><a class="idlType" href="#idl-def-MIDIConnectionEventInit"><code>MIDIConnectionEventInit</code></a> インターフェース</span> <button onclick="OpenOriginal('MIDIConnectionEventInit')">原文</button></h3>
        <pre class="idl"><span class="idlDictionary" id="idl-def-MIDIConnectionEventInit">dictionary <span class="idlDictionaryID">MIDIConnectionEventInit</span> : <span class="idlSuperclass">EventInit</span> {
<span class="idlMember">    <span class="idlMemberType"><a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a></span> <span class="idlMemberName"><a href="#widl-MIDIConnectionEventInit-port">port</a></span>;</span>
};</span></pre><section property="bibo:hasPart" resource="#dictionary-midiconnectioneventinit-members" typeof="bibo:Chapter" id="dictionary-midiconnectioneventinit-members"><h4 resource="#h-dictionary-midiconnectioneventinit-members" id="h-dictionary-midiconnectioneventinit-members"><span property="xhv:role" resource="xhv:heading"><span class="secno">8.2.1 </span>ディクショナリ <a href="#idl-def-MIDIConnectionEventInit" class="idlType"><code>MIDIConnectionEventInit</code></a> メンバー</span> <button onclick="OpenOriginal('h-dictionary-midiconnectioneventinit-members')">原文</button></h4><dl class="dictionary-members"><dt id="widl-MIDIConnectionEventInit-port"><code>port</code> <span class="idlMemberType"><a class="idlType" href="#idl-def-MIDIPort"><code>MIDIPort</code></a></span>型</dt><dd>
            <p>接続または切断されたポートです。</p>
          </dd></dl></section>
      </section>
    </section>

    <section property="bibo:hasPart" resource="#examples-of-web-midi-api-usage-in-javascript" typeof="bibo:Chapter" id="examples-of-web-midi-api-usage-in-javascript" class="informative">
      <!--OddPage--><h2 resource="#examples" id="examples"><span property="xhv:role" resource="xhv:heading"><span class="secno">9. </span>JavaScriptでのWeb MIDI API 使用例</span> <button onclick="OpenOriginal('examples')">原文</button></h2><p><em>このセクションは非基準情報です。</em></p>
      <p>JavaScriptでの一般的なMIDIの使い方の例を次に示します。</p>

      <section property="bibo:hasPart" resource="#getting-access-to-the-midi-system" typeof="bibo:Chapter" id="getting-access-to-the-midi-system">
        <h3 resource="#h-getting-access-to-the-midi-system" id="h-getting-access-to-the-midi-system"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.1 </span>MIDIシステムへのアクセスの取得</span> <button onclick="OpenOriginal('h-getting-access-to-the-midi-system')">原文</button></h3>
        <p>このサンプルはMIDIシステムへのアクセス要求の方法を示しています。</p>
          <pre class="code es-code">var midi = null;  // グローバルなMIDIAccessオブジェクト

function onMIDISuccess( midiAccess ) {
  console.log( "MIDI ready!" );
  midi = midiAccess;  // グローバルに保存します (実際の使用ではおそらくオブジェクトのインスタンスに保持します)
}

function onMIDIFailure(msg) {
  console.log( "Failed to get MIDI access - " + msg );
}

navigator.requestMIDIAccess().then( onMIDISuccess, onMIDIFailure );</pre>
      </section>

      <section property="bibo:hasPart" resource="#requesting-access-to-the-midi-system-with-system-exclusive-support" typeof="bibo:Chapter" id="requesting-access-to-the-midi-system-with-system-exclusive-support">
        <h3 resource="#h-requesting-access-to-the-midi-system-with-system-exclusive-support" id="h-requesting-access-to-the-midi-system-with-system-exclusive-support"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.2 </span>システムエクスクルーシブサポートを伴ったMIDIシステムへのアクセスの取得</span> <button onclick="OpenOriginal('h-requesting-access-to-the-midi-system-with-system-exclusive-support')">原文</button></h3>
        <p>このサンプルはシステムエクスクルーシブの送受信を含めたMIDIシステムへのアクセス要求の方法を示しています。</p>
          <pre class="code es-code">var midi = null;  // // グローバルMIDIAccessオブジェクト

function onMIDISuccess( midiAccess ) {
  console.log( "MIDI ready!" );
  midi = midiAccess;  // グローバルに保存します (実際の使用ではおそらくオブジェクトのインスタンスに保持します)
}

function onMIDIFailure(msg) {
  console.log( "Failed to get MIDI access - " + msg );
}

navigator.requestMIDIAccess( { sysex: true } ).then( onMIDISuccess, onMIDIFailure );</pre>
      </section>

      <section property="bibo:hasPart" resource="#listing-inputs-and-outputs" typeof="bibo:Chapter" id="listing-inputs-and-outputs">
        <h3 resource="#h-listing-inputs-and-outputs" id="h-listing-inputs-and-outputs"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.3 </span>入力および出力のリスティング</span> <button onclick="OpenOriginal('h-listing-inputs-and-outputs')">原文</button></h3>
        <p>このサンプルはES6のfor...of表記を使って入力、出力ポートのリストを取得し、その情報をconsole logに出力します。
          <span class="annotate">(訳注：まだ説明とサンプルコードに不一致が見られます)</span>
          </p><pre class="code es-code">function listInputsAndOutputs( midiAccess ) {
  for (var input in midiAccess.inputs) {
    console.log( "Input port [type:'" + input.type + "'] id:'" + input.id +
      "' manufacturer:'" + input.manufacturer + "' name:'" + input.name +
      "' version:'" + input.version + "'" );
  }

  for (var output in midiAccess.outputs) {
    console.log( "Output port [type:'" + output.type + "'] id:'" + output.id +
      "' manufacturer:'" + output.manufacturer + "' name:'" + output.name +
      "' version:'" + output.version + "'" );
  }
}</pre>
      </section>

      <section property="bibo:hasPart" resource="#handling-midi-input" typeof="bibo:Chapter" id="handling-midi-input">
        <h3 resource="#h-handling-midi-input" id="h-handling-midi-input"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.4 </span>MIDI入力の扱い方</span> <button onclick="OpenOriginal('h-handling-midi-input')">原文</button></h3>
        <p>このサンプルは入力の任意の1つのポートで受信したメッセージをconsole.logに出力します。</p>
        <pre class="code es-code">function onMIDIMessage( event ) {
  var str = "MIDI message received at timestamp " + event.timestamp + "[" + event.data.length + " bytes]: ";
  for (var i=0; i&lt;event.data.length; i++) {
    str += "0x" + event.data[i].toString(16) + " ";
  }
  console.log( str );
}

function startLoggingMIDIInput( midiAccess, indexOfPort ) {
  midiAccess.inputs.forEach( function(entry) {entry.value.onmidimessage = onMIDIMessage;});
}</pre>
      </section>

      <section property="bibo:hasPart" resource="#sending-midi-messages-to-an-output-device" typeof="bibo:Chapter" id="sending-midi-messages-to-an-output-device">
        <h3 resource="#h-sending-midi-messages-to-an-output-device" id="h-sending-midi-messages-to-an-output-device"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.5 </span>出力デバイスへのMIDIメッセージの送信</span> <button onclick="OpenOriginal('h-sending-midi-messages-to-an-output-device')">原文</button></h3>
        <p>このサンプルは中央Cのノートオンメッセージを
          MIDIチャンネル1(MIDIチャンネルのインデックスは0から始まりますが一般的には1～16と表されます)に送信し、
          対応するノートオフメッセージを1秒後に送るようにキューに登録します。</p>
        <pre class="code es-code">function sendMiddleC( midiAccess, portID ) {
  var noteOnMessage = [0x90, 60, 0x7f];    // note on, middle C, full velocity
  var output = midiAccess.outputs.get(portID);
  output.send( noteOnMessage );  //omitting the timestamp means send immediately.
  output.send( [0x80, 60, 0x40], window.performance.now() + 1000.0 ); // インライン配列作成 - ノートオフ, 中央C,
                                                                      // リリースベロシティ = 64, タイムスタンプ = now + 1000ms.
}</pre>
      </section>

      <section property="bibo:hasPart" resource="#a-simple-loopback" typeof="bibo:Chapter" id="a-simple-loopback">
        <h3 resource="#h-a-simple-loopback" id="h-a-simple-loopback"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.6 </span>単純なループバック</span> <button onclick="OpenOriginal('h-a-simple-loopback')">原文</button></h3>
        <p>このサンプルは、システムエクスクルーシブメッセージを含め、1番目の入力ポートで受信したメッセージを1番目の出力ポートに出力します。</p>
        <pre class="code es-code">var midi = null;  // グローバル MIDIAccess オブジェクト
var output = null;

function echoMIDIMessage( event ) {
  if (output) {
    output.send( event.data, event.timestamp );
  }
}

function onMIDISuccess( midiAccess ) {
  console.log( "MIDI ready!" );
  var input = midiAccess.inputs.entries.next();
  if (input)
    input.onmidimessage = echoMIDIMessage;
  output = midiAccess.outputs.values().next().value;
  if (!input || !output)
    console.log("Uh oh! Couldn't get i/o ports.");
}

function onMIDIFailure(msg) {
  console.log( "Failed to get MIDI access - " + msg );
}

navigator.requestMIDIAccess().then( onMIDISuccess, onMIDIFailure );</pre>
      </section>

      <section property="bibo:hasPart" resource="#a-simple-monophonic-sine-wave-midi-synthesizer" typeof="bibo:Chapter" id="a-simple-monophonic-sine-wave-midi-synthesizer">
        <h3 resource="#h-a-simple-monophonic-sine-wave-midi-synthesizer" id="h-a-simple-monophonic-sine-wave-midi-synthesizer"><span property="xhv:role" resource="xhv:heading"><span class="secno">9.7 </span>単純なモノフォニックサイン波MIDIシンセサイザー</span> <button onclick="OpenOriginal('h-a-simple-monophonic-sine-wave-midi-synthesizer')">原文</button></h3>
        <p>
          このサンプルは全ての使用可能な入力ポートで受信したノートメッセージで、
          <a class="internalDFN" href="#WebAudio">Web Audio API</a>を使ったモノフォニックのサイン波オシレーターのエンベロープと周波数を制御し、
          非常に単純なシンセサイザーを作っています。
          ノートオンとノートオフメッセージがサポートされていますが、サスティンペダル、ベロシティ、ピッチベンドなどはサポートされていません。
          このサンプルは<a href="http://webaudiodemos.appspot.com/monosynth/index.html">webaudiodemos.appspot.com</a>でも公開されています。
        </p>
        <pre class="code es-code">var context=null;   // the Web Audio "context" object
    var midiAccess=null;  // the MIDIAccess object.
    var oscillator=null;  // the single oscillator
    var envelope=null;    // the envelope for the single oscillator
    var attack=0.05;      // attack speed
    var release=0.05;   // release speed
    var portamento=0.05;  // portamento/glide speed
    var activeNotes = []; // the stack of actively-pressed keys

    window.addEventListener('load', function() {
      // patch up prefixes
      window.AudioContext=window.AudioContext||window.webkitAudioContext;

      context = new AudioContext();
      if (navigator.requestMIDIAccess)
        navigator.requestMIDIAccess().then( onMIDIInit, onMIDIReject );
      else
        alert("No MIDI support present in your browser.  You're gonna have a bad time.")

      // set up the basic oscillator chain, muted to begin with.
      oscillator = context.createOscillator();
      oscillator.frequency.setValueAtTime(110, 0);
      envelope = context.createGain();
      oscillator.connect(envelope);
      envelope.connect(context.destination);
      envelope.gain.value = 0.0;  // Mute the sound
      oscillator.start(0);  // Go ahead and start up the oscillator
    } );

    function onMIDIInit(midi) {
      midiAccess = midi;

      var haveAtLeastOneDevice=false;
      var inputs=midiAccess.inputs.values();
      for ( var input = inputs.next(); input &amp;&amp; !input.done; input = inputs.next()) {
        input.value.onmidimessage = MIDIMessageEventHandler;
        haveAtLeastOneDevice = true;
      }
      if (!haveAtLeastOneDevice)
        alert("No MIDI input devices present.  You're gonna have a bad time.");
    }

    function onMIDIReject(err) {
      alert("The MIDI system failed to start.  You're gonna have a bad time.");
    }

    function MIDIMessageEventHandler(event) {
      // Mask off the lower nibble (MIDI channel, which we don't care about)
      switch (event.data[0] &amp; 0xf0) {
        case 0x90:
          if (event.data[2]!=0) {  // if velocity != 0, this is a note-on message
            noteOn(event.data[1]);
            return;
          }
          // if velocity == 0, fall thru: it's a note-off.  MIDI's weird, y'all.
        case 0x80:
          noteOff(event.data[1]);
          return;
      }
    }

    function frequencyFromNoteNumber( note ) {
      return 440 * Math.pow(2,(note-69)/12);
    }

    function noteOn(noteNumber) {
      activeNotes.push( noteNumber );
      oscillator.frequency.cancelScheduledValues(0);
      oscillator.frequency.setTargetAtTime( frequencyFromNoteNumber(noteNumber), 0, portamento );
      envelope.gain.cancelScheduledValues(0);
      envelope.gain.setTargetAtTime(1.0, 0, attack);
    }

    function noteOff(noteNumber) {
      var position = activeNotes.indexOf(noteNumber);
      if (position!=-1) {
        activeNotes.splice(position,1);
      }
      if (activeNotes.length==0) {  // shut off the envelope
        envelope.gain.cancelScheduledValues(0);
        envelope.gain.setTargetAtTime(0.0, 0, release );
      } else {
        oscillator.frequency.cancelScheduledValues(0);
        oscillator.frequency.setTargetAtTime( frequencyFromNoteNumber(activeNotes[activeNotes.length-1]), 0, portamento );
      }
    }</pre>
      </section>

    </section>
    <section property="bibo:hasPart" resource="#security-and-privacy-considerations-of-midi" typeof="bibo:Chapter" id="security-and-privacy-considerations-of-midi">
      <!--OddPage--><h2 resource="#h-security-and-privacy-considerations-of-midi" id="h-security-and-privacy-considerations-of-midi"><span property="xhv:role" resource="xhv:heading"><span class="secno">10. </span>MIDIのセキュリティとプライバシーに関する考察</span> <button onclick="OpenOriginal('h-security-and-privacy-considerations-of-midi')">原文</button></h2>
      <p>
        WebプラットフォームにWeb MIDI APIを加えるにあたって、2つの基本的なセキュリティとプライバシーに関する懸案事項があります：
      </p>
      <ol>
        <li>
          ユーザーのMIDIインターフェースの列挙を可能にする事は潜在的にフィンガープリンティングのターゲットになります
          (特定のMIDIインターフェースの接続によってユーザーを一意に識別するという意味です)。
          この文脈で注意するべきは、MIDI<i>インターフェース</i>の列挙である事です。
          つまり、MIDIインターフェースに接続されている、例えば、個別のサンプラーやシンセサイザーは それらのデバイスがUSB(USB-MIDIデバイスは典型的に自身のMIDIインターフェースを持ち、列挙されます)接続でない限り、列挙されません。 フィンガープリンティングの対象となるインターフェースはMIDI"ポート"と同義で(そこに接続されているデバイスではありません)、
          APIからMIDIインターフェースに対する個別のデバイスの名前、製造者、その内容の詳細は不明なid、が得られます。
          <p>
            大量のMIDIデバイスが接続されているシステムはあまり多くありません。
            通常それらのシステムではUSBハブにUSB-MIDIで大量に接続するような事はせず、典型的にはハードウェアMIDIインターフェースを使用します。
            この場合、もちろんMIDI"デバイス"としてはハードウェアMIDIインターフェースだけが列挙され、
            一方そこに接続されているシンセサイザー、サンプラー、その他は列挙されません。
            少数のデバイスを接続した場合、ここに公開される情報の量は他のAPI、例えばゲームパッドAPIなどと同等です。
            大多数のシステムでは接続しているMIDIインターフェースの数は比較的少ないです。
          </p></li>
        <li>使用可能なポートの識別によるフィンガープリンティングに関する事項とは別に、MIDIメッセージの送受信に関する事項があります。
          これらの課題について、以下でより深く掘り下げます。
        </li>
      </ol>
      <p>MIDIポートに対してできる事を簡単に分類すると：
        </p><ol>
          <li>ショートメッセージ(SysExを除く全てのメッセージ)の送信
          </li><li>ショートメッセージ(SysExを除く全てのメッセージ)の受信
          </li><li>SysExメッセージの送信。
            SysExメッセージは("Roland Jupiter-80シンセサイザーのパッチデータ"のような)
            他のデバイスには適用できないデバイス固有メッセージに加えて、
            MIDIタイムコードおよびMIDIサンプルダンプスタンダードのような共通で認識されるものの両方を含みます。
          </li><li>SysExメッセージの受信
        </li></ol>
      <p>そのそれぞれが持つインパクトは：
        </p><ol>
          <li>ショートメッセージの送信：
            ノートオン/ノートオフ/コントローラーメッセージは接続された機器や(MacやWindowsが)デフォルトで持っている仮想シンセサイザーから、
            音の再生を行います。
            これ自体に情報開示の課題はありません。 既に&lt;audio&gt;タグ、Flash、Web Audioを使えばインタラクション無しで音を出す事ができます。 接続されているデバイスの中には業務用の照明コントロールシステムがあるかも知れません。その場合、それはステージの照明を制御できます。
            しかしながらこれは極めて稀であり、知られているどんなシステムにも、ショートメッセージによって最終的にダメージを受けたり情報を流出するものはありません。 最悪、悪意のあるページが照明を点滅させたりした場合、ユーザーはページを閉じて照明コントローラーをリセットできます。
          </li><li>ショートメッセージの受信： ノートオン/ノートオフ/コントローラーメッセージの受信はどんな情報の開示やセキュリティの問題も
            引き起こしません。
            識別に使用できるデータはなく、単にコントローラーのメッセージのストリームであり、 (クロック型のメッセージを除いて)
            これらの全てはMIDIデバイスでのユーザーの操作によるものです。 これはキーボードやマウスのイベントに非常に似ています。
          </li><li>SysExの送受信。 これは最大の課題です。
            なぜならそれは、SysExメッセージに対するシステム固有の反応を探して使用可能なハードウェアを識別したり、
            それを使ってデータ、例えばサンプラーに保存されているサンプルをダウンロードする事ができ、
            あるいはそのデータを入れ替える(サンプルやデバイスのパッチを消去する)事も可能です
            (とは言え、これらのシナリオは特定の機器に対するコードを書く必要があります)。
            また、幾つかのサンプラーはシステムエクスクルーシブメッセージでサンプルの録音の開始が可能です。
            そのためもしサンプラーに専用のマイクが接続されている場合(実際には一般的ではありませんが可能ではあります)、
            それは特定のデバイスが短時間の音を録音して、ユーザーの介在なしにネットワークにアップロードする事が可能かも知れません
            (デバイスからのオーディオストリームを流す事はできず、ほとんどのサンプラーのメモリー量には限界があります。
            またMIDIサンプルダンプSysExによるデータ転送は(7ビットへの変換が必要な)低速なものです。
            そのため、長時間に渡って盗聴されるような事は起こらないでしょう)。 明らかにフィンガープリンティングの方が問題であり、
            パッチ情報/保存されているサンプル/ユーザー設定により、
            システムを一意に識別する事が可能です
            (繰り返しますが、"全てのパッチを取得してハッシュする"標準化された方法はありませんので、
            これには多くのデバイス固有のコードが必要です)。
            この事は、システムエクスクルーシブメッセージがセキュリティカテゴリに分類されるべきものである事を示唆しています。
        </li></ol>
      <p>これらの機能に対して、MIDIによってどんなシナリオが可能になるのかを確認する事も有用です：
        </p><ol>
          <li>ショートメッセージの受信。これはWeb MIDIに取って最も魅力的なもので、キーボード、ドラムパッド、ギター、
            管楽器コントローラー、DJコントローラー、
            その他色々な機器からの入力によって楽器をコントロールでき、
            他のコントロールシナリオと同様にWeb Audio APIで使う事もできます
            (MIDIは何十億ドルもの規模の音楽制作産業で使われているプロトコルであり、
            Garagebandのようなコンシューマーアプリケーションだけでなく、
            プロ/プロシューマー向けのオーディオ/メディアアプリケーションで使われる、
            コンピューターに接続するためのツマミやボタンを持った物理的なコントローラーが多数存在します)
          </li><li>ショートメッセージの送信。
            送信に関しては、魅力として言えば、かなり少なくなります。
            出力デバイスにハードウェアシンセサイザーのようなものを接続すると言うシナリオは現在のマーケットではそれほど一般的ではありません。
            ただ大きな例外として、多くのMIDIコントローラーが、
            インジケーターライトの外部ホストコントロールを持っている事でこれが劇的に有用なものに変わります。
            例えば、非常に一般的なNovationのLaunchpadコントローラーはMIDIノートオン/オフメッセージの送信によって
            ボタンの点灯/消灯や色の変化を行う事ができます。ほとんど全てのDJコントローラーも同様です。
          </li><li>SysExの送受信。 明らかにハイエンドハードウェア機器での高度な通信では、SysExが必要になります。
            残念ながら、幾つかの共通MIDIコマンド(例えば、一般的なスタート/ストップ/巻き戻し/早送りコマンドであるMIDIマシンコントロールなど)
            もシステムエクスクルーシブメッセージとして送られます。 そして多くのデバイスではプログラムパッチ、高度なコントローラーメッセージ、
            ファームウェアダウンロードなどにシステムエクスクルーシブを使用しており、
            それはWeb MIDIのシナリオとしても強く要求される事です。 デバイスによってはSysExを直接制御プロトコルとして使用します。
            それは多くのデータを1つの"メッセージ"にパックできるため、
            多くのデバイスはSysExをパッチや設定データの保存/読み込みのための安価なコンピューターストレージとして使用します。
            ハードウェアに対してWeb MIDIを使って、Webベースの設定やプログラミングインターフェースを提供する事に強い興味を持っている
            メジャーな音楽ハードウェア生産者もいます。
            簡単に言えば、SysExを使えなくすると、ハイエンドのシナリオが使えなくなるだけではないという事です。
        </li></ol>
      <p>簡単に言えば： MIDIデバイスの列挙で晒される事になる、付加的なフィンガープリンティングは、
        そのままゲームパッドAPIによるゲームパッドの列挙による付加的なフィンガープリンティングに類似しています。
        典型的なユーザーではせいぜい数個のデバイスが接続され、それらが設定されても、
        晒される情報はそのインターフェース自体のものです(即ちユーザーが設定したデータではありません)。
      </p><p>ショートメッセージの受信に関するセキュリティ上の懸案も小さいものです。
        それはキーボード、マウス、モバイル/ラップトップの加速度センサー、タッチ入力、ゲームパッドイベントのリストアップに類似しています。
        付加的に晒される情報はなく、クロック信号以外の全てのメッセージはユーザーの操作で発生します。
      </p><p>ショートメッセージの送信に関する懸案は全てのオーディオ出力に類似しています。
        ユーザーの情報を上書きしたりユーザーの情報を読み取る事はできず、ただ、音を出し、パッチを変更し、
        (稀な設定では)照明を点灯/消灯します。しかしこれは破壊的ではなく、永続するものではありません。
      </p><p>その一方、システムエクスクルーシブは潜在的に制限の少ないものであるため、APIの中でより注意深く、
        ユーザーのセキュリティの留め金として、区別してSysExの要求をする事は良い考えです。
        <a href="#requestMIDIAccess">提案されているセキュリティモデル</a>ではユーザーエージェントがMIDIデバイスへのアクセスの前に明示的に
        ユーザーの許可を求める事を許してはいますが、
        今の所、この許可を得るためにプロンプトを出す事は必須ではありません。
        しかしその一方、システムエクスクルーシブのサポートに関してはリクエストの中でそれを要求しなくてはならない事を詳細に定めています。
      </p>
    </section>



<section property="bibo:hasPart" resource="#references" typeof="bibo:Chapter" id="references" class="appendix"><!--OddPage--><h2 resource="#h-references" id="h-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">A. </span>リファレンス</span></h2><section property="bibo:hasPart" resource="#normative-references" typeof="bibo:Chapter" id="normative-references"><h3 resource="#h-normative-references" id="h-normative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">A.1 </span>基準リファレンス</span></h3><dl resource="" class="bibliography"><dt id="bib-DOM-LEVEL-3-CORE">[DOM-LEVEL-3-CORE]</dt><dd>Arnaud Le Hors; Philippe Le Hégaret; Lauren Wood; Gavin Nicol; Jonathan Robie; Mike Champion; Steven B Byrne et al. <a property="dc:requires" href="http://www.w3.org/TR/DOM-Level-3-Core/"><cite>Document Object Model (DOM) Level 3 Core Specification</cite></a>. 7 April 2004. W3C Recommendation. URL: <a property="dc:requires" href="http://www.w3.org/TR/DOM-Level-3-Core/">http://www.w3.org/TR/DOM-Level-3-Core/</a>
</dd><dt id="bib-DOM4">[DOM4]</dt><dd>Anne van Kesteren; Aryeh Gregor; Ms2ger; Alex Russell; Robin Berjon. <a property="dc:requires" href="http://www.w3.org/TR/dom/"><cite>W3C DOM4</cite></a>. 10 July 2014. W3C Last Call Working Draft. URL: <a property="dc:requires" href="http://www.w3.org/TR/dom/">http://www.w3.org/TR/dom/</a>
</dd><dt id="bib-HIGHRES-TIME">[HIGHRES-TIME]</dt><dd>Jatinder Mann. <a property="dc:requires" href="http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/HighResolutionTime/Overview.html"><cite>High Resolution Time Specification</cite></a>. 18 October 2012. W3C Editor's Draft. URL: <a property="dc:requires" href="http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/HighResolutionTime/Overview.html">http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/HighResolutionTime/Overview.html</a>
</dd><dt id="bib-HTML5">[HTML5]</dt><dd>Ian Hickson; Robin Berjon; Steve Faulkner; Travis Leithead; Erika Doyle Navara; Edward O'Connor; Silvia Pfeiffer. <a property="dc:requires" href="http://www.w3.org/TR/html5/"><cite>HTML5</cite></a>. 28 October 2014. W3C Recommendation. URL: <a property="dc:requires" href="http://www.w3.org/TR/html5/">http://www.w3.org/TR/html5/</a>
</dd><dt id="bib-MIDI">[MIDI]</dt><dd><a property="dc:requires" href="http://www.midi.org/techspecs/index.php"><cite>Musical Instrument Digital Interface (MIDI)</cite></a> November 2001. MIDI Manufacturers Association. Complete MIDI 1.0 Detailed Specification ISBN 0-9728831-0-X URL: <a property="dc:requires" href="http://www.midi.org/techspecs/index.php">http://www.midi.org/techspecs/index.php</a>
</dd><dt id="bib-RFC2119">[RFC2119]</dt><dd>S. Bradner. <a property="dc:requires" href="https://tools.ietf.org/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a property="dc:requires" href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
</dd><dt id="bib-TYPED-ARRAYS">[TYPED-ARRAYS]</dt><dd>David Herman; Kenneth Russell. <a property="dc:requires" href="https://www.khronos.org/registry/typedarray/specs/latest/"><cite>Typed Array Specification</cite></a>. 26 June 2013. Khronos Working Draft. URL: <a property="dc:requires" href="https://www.khronos.org/registry/typedarray/specs/latest/">https://www.khronos.org/registry/typedarray/specs/latest/</a>
</dd><dt id="bib-WEBIDL">[WEBIDL]</dt><dd>Cameron McCormack. <a property="dc:requires" href="http://www.w3.org/TR/WebIDL/"><cite>Web IDL</cite></a>. 19 April 2012. W3C Candidate Recommendation. URL: <a property="dc:requires" href="http://www.w3.org/TR/WebIDL/">http://www.w3.org/TR/WebIDL/</a>
</dd><dt id="bib-webaudio">[webaudio]</dt><dd>Paul Adenot; Chris Wilson; Chris Rogers. <a property="dc:requires" href="http://www.w3.org/TR/webaudio/"><cite>Web Audio API</cite></a>. 10 October 2013. W3C Working Draft. URL: <a property="dc:requires" href="http://www.w3.org/TR/webaudio/">http://www.w3.org/TR/webaudio/</a>
</dd></dl></section></section></body></html>
